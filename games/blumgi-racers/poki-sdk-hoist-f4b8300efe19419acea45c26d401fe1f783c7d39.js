(()=>{"use strict";const t={ready:"pokiAppReady",adblocked:"pokiAppAdblocked",startLoading:"pokiAppStartLoading",ads:{completed:"pokiAdsCompleted",error:"pokiAdsError",impression:"pokiAdsImpression",durationChange:"pokiAdsDurationChange",limit:"pokiAdsLimit",ready:"pokiAdsReady",requested:"pokiAdsRequested",prebidRequested:"pokiAdsPrebidRequested",skipped:"pokiAdsSkipped",started:"pokiAdsStarted",stopped:"pokiAdsStopped",busy:"pokiAdsBusy",position:{preroll:"PP",midroll:"PM",rewarded:"PR",display:"DP"},video:{clicked:"pokiVideoAdsClicked",firstQuartile:"pokiVideoAdsFirstQuartile",midPoint:"pokiVideoAdsMidPoint",thirdQuartile:"pokiVideoAdsThirdQuartile",error:"pokiVideoAdsError",loaderError:"pokiVideoAdsLoaderError",paused:"pokiVideoAdsPauseTriggered",resumed:"pokiVideoAdsResumedTriggered",progress:"pokiVideoAdsProgress",buffering:"pokiVideoAdsBuffering",startHouseAdFlow:"pokiVideoAdsStartHouseAdFlow"},display:{error:"pokiDisplayAdsError"}},info:{messages:{timeLimit:"The ad-request was not processed, because of a time constraint",prerollLimit:"The ad-request was cancelled, because we're not allowed to show a preroll (PokiSDK.commercialBreak before PokiSDK.gameplayStart)",disabled:"The ad-request was cancelled, because we've disabled this format for this specific configuration"}},playtest:{startVideo:"pokiPlaytestStartVideo",stopVideo:"pokiPlaytestStopVideo"},message:{event:"pokiMessageEvent",sdkDetails:"pokiMessageSdkDetails",setPokiURLParams:"pokiMessageSetPokiURLParams",sendGameScreenshot:"pokiMessageSendScreenshot",sendGameRawScreenshot:"pokiMessageSendRawScreenshot",sendUploadScreenshot:"pokiMessageSendUploadScreenshot",sendCommand:"pokiMessageSendCommand",sendInspectorEvent:"pokiMessageInspectorEvent",sendInspectorCookies:"pokiMessageSendInspectorCookies",sendInspectorConsole:"pokiMessageSendInspectorConsole",sendInspectorBadBehavior:"pokiMessageSendInspectorBadBehavior"},tracking:{custom:"pokiTrackingCustom",measure:"pokiTrackingMeasure",debugTrueInProduction:"pokiMessageDebugTrueProduction",screen:{gameplayStart:"pokiTrackingScreenGameplayStart",gameplayStop:"pokiTrackingScreenGameplayStop",gameLoadingFinished:"pokiTrackingScreenGameLoadingFinished",commercialBreak:"pokiTrackingScreenCommercialBreak",rewardedBreak:"pokiTrackingScreenRewardedBreak",firstRound:"pokiTrackingScreenFirstRound",displayAd:"pokiTrackingScreenDisplayAdRequest",destroyAd:"pokiTrackingScreenDisplayAdDestroy",playerActive:"pokiTrackingScreenPlayerActive"},playtest:{showModal:"pokiTrackingPlaytestShowModal",accepted:"pokiTrackingPlaytestAccepted",rejected:"pokiTrackingPlaytestRejected",noCanvas:"pokiTrackingPlaytestNoCanvas",notLoaded:"pokiTrackingPlaytestNotLoaded",starting:"pokiTrackingPlaytestStarting",closed:"pokiTrackingPlaytestClosed",error:"pokiTrackingPlaytestError"},sdk:{status:{initialized:"pokiTrackingSdkStatusInitialized",failed:"pokiTrackingSdkStatusFailed"}},ads:{status:{busy:"pokiTrackingAdsStatusBusy",completed:"pokiTrackingAdsStatusCompleted",error:"pokiTrackingAdsStatusError",impression:"pokiTrackingAdsStatusImpression",limit:"pokiTrackingAdsStatusLimit",ready:"pokiTrackingAdsStatusReady",requested:"pokiTrackingAdsStatusRequested",prebidRequested:"pokiTrackingAdsStatusPrebidRequested",skipped:"pokiTrackingAdsStatusSkipped",started:"pokiTrackingAdsStatusStarted",buffering:"pokiTrackingAdsStatusBuffering"},video:{clicked:"pokiTrackingAdsVideoClicked",error:"pokiTrackingAdsVideoError",loaderError:"pokiTrackingAdsVideoLoaderError",progress:"pokiTrackingAdsVideoProgress",paused:"pokiTrackingAdsVideoPaused",resumed:"pokiTrackingAdsVideoResumed"},display:{requested:"pokiTrackingScreenDisplayAdRequested",impression:"pokiTrackingScreenDisplayAdImpression"},rewardedWeb:{request:"pokiTrackingRewardedWebRequest",ready:"pokiTrackingRewardedWebReady",impression:"pokiTrackingRewardedWebImpression",closedGranted:"pokiTrackingRewardedWebClosedGranted",closedDeclined:"pokiTrackingRewardedWebclosedDeclined",empty:"pokiTrackingRewardedWebEmpty"}}}};function e(t){var e=new RegExp("".concat(t,"=([^;]+)(?:;|$)")).exec(document.cookie);return e?e[1]:""}function n(t,e,n){document.cookie="".concat(t,"=").concat(e,"; path=/; samesite=lax; max-age=").concat(Math.min(n||15552e3,15552e3))}function o(){for(var t=Math.floor(Date.now()/1e3),e="",n=0;n<4;n++)e=String.fromCharCode(255&t)+e,t>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){var o=new Uint32Array(12);crypto.getRandomValues(o);for(var r=0;r<12;r++)e+=String.fromCharCode(255&o[r])}else for(var i=0;i<12;i++)e+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function r(t,e,n){console.error(t);var o=[{k:"where",v:e},{k:"error",v:t.name&&t.message?"".concat(t.name,": ").concat(t.message):JSON.stringify(t)}];if(void 0!==n){var r=n;"string"!=typeof t&&(r=JSON.stringify(t)),o.push({k:"extra",v:r})}!function(t,e){fetch(t,{method:"POST",headers:{"Content-Type":"text/plain"},body:e,mode:"no-cors",keepalive:!0,credentials:"omit"}).catch((function(n){console.error(n);try{var o="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",t,!0),o.setRequestHeader("Content-Type","text/plain"),o.send(e)}catch(t){}}))}("https://t.poki.io/l",JSON.stringify({c:"observer-error",ve:7,d:o}))}window._pokiUserGlobalName=window._pokiUserGlobalName||"user";var i="poki_session";window._pokiSessionGlobalName=window._pokiSessionGlobalName||"session";var a=["poki.at","poki.be","poki.by","poki.ch","poki.cn","poki.co.id","poki.co.il","poki.com.br","poki.com","poki.cz","poki.de","poki.dk","poki.fi","poki.it","poki.jp","poki.nl","poki.pl","poki.pt","poki.se","www.trochoi.net"];function s(){try{var t=new URL(document.referrer).hostname;return a.indexOf(t)>-1?"poki":t}catch(t){}return""}function c(t,e){if(!t)return!1;if(!(t&&t.page&&t.landing_page&&t.previous_page))return!1;if(!t.tab_id)return!1;if(!t.expire||Date.now()>t.expire)return!1;if(t.expire>Date.now()+18e5)return!1;if(e){if(void 0!==t.referrer_domain){var n=s();if("poki"!==n&&n!==t.referrer_domain)return!1}var o=new URLSearchParams(window.location.search);if(["gclid","msclkid","yclid","ttclid","fbclid","utm_campaign","campaign","adgroup","creative","utm_term"].some((function(t){return o.has(t)}))||"web_app_manifest"===o.get("utm_source")||"bing"===o.get("utm_source")||"cpc"===o.get("utm_medium")||"rtb-cpm"===o.get("utm_medium"))return!1}return!0}function u(){var t=null;c(window[window._pokiSessionGlobalName],!1)&&(t=window[window._pokiSessionGlobalName]);try{var e=sessionStorage.getItem(i);if(e){var n=JSON.parse(e);c(n,!0)&&(!t||n.depth>t.depth)&&(t=n)}}catch(t){try{r(t,"getSession",sessionStorage.getItem(i))}catch(e){r(t,"getSession",e)}}return t}function l(){var t=0;window[window._pokiSessionGlobalName]&&window[window._pokiSessionGlobalName].count&&(t=window[window._pokiSessionGlobalName].count);try{var n=sessionStorage.getItem(i);if(n){var o=JSON.parse(n);o&&o.count&&o.count>t&&(t=o.count)}}catch(t){try{r(t,"getPreviousSessionCount",sessionStorage.getItem(i))}catch(e){r(t,"getPreviousSessionCount",e)}}try{var a=e(i);if(a){var s=JSON.parse(a);s&&s.count&&s.count>t&&(t=s.count)}}catch(t){try{r(t,"getPreviousSessionCount",e(i))}catch(e){r(t,"getPreviousSessionCount",e)}}return t}function d(){if(window[window._pokiSessionGlobalName]&&window[window._pokiSessionGlobalName].tab_id)return window[window._pokiSessionGlobalName].tab_id;try{var t=sessionStorage.getItem(i);if(t){var e=JSON.parse(t);if(e&&e.tab_id)return e.tab_id}}catch(t){}return o()}function p(){var t=0,n=u();n&&(t=n.depth);try{var o=e(i);if(o){var a=JSON.parse(o);!c(a,!0)||n&&a.id!==n.id||(t=Math.max(t,a.depth))}}catch(t){var s=null;try{s=e(i)||null}catch(t){}r(t,"getSessionDepth",s)}return t}const f=function(t,e){var n=!1;return Object.keys(e).forEach((function(o){e[o]===t&&(n=!0)})),n};var h=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","GB","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO"];const v=function(t,e){var n;if("undefined"==typeof window&&!e)return"";t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("(?:[\\?&]|^)".concat(t,"=([^&#]*)")).exec(e||(null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.search)||"");return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},g=function(){return"undefined"!=typeof navigator&&/(?:phone|windows\s+phone|ipod|blackberry|(?:android|bb\d+|meego|silk|googlebot) .+? mobile|palm|windows\s+ce|opera mini|avantgo|mobilesafari|docomo|kaios)/i.test(navigator.userAgent)},m=function(){return"undefined"!=typeof navigator&&/(?:ipad|playbook|(?:android|bb\d+|meego|silk)(?! .+? mobile))/i.test(navigator.userAgent)};var y,w,b,k=v("url_referrer")||"",A={bot:"1"===v("bot"),categories:v("categories")||"",device:g()?"mobile":m()?"tablet":"desktop",experiment:v("experiment")||"",forceAd:v("force_ad")||!1,isPokiIframe:(parseInt(v("site_id"),10)||0)>0,siteID:parseInt(v("site_id"),10)||3,tag:v("tag")||"",versionID:v("game_version_id"),debugMode:"true"===v("pokiDebug"),logMode:""!==v("pokiLogging"),testVideos:"true"===v("testVideos"),referrer:k,isPlayground:!!window.isPokiPlayground,isInspector:"inspector-uploads.poki-user-content.com"===(null===(y=null===window||void 0===window?void 0:window.location)||void 0===y?void 0:y.host)||(null===(w=null===document||void 0===document?void 0:document.referrer)||void 0===w?void 0:w.includes("inspector.poki.dev"))||"1"===v("inspector"),houseAdsOnly:!1,ccpaApplies:v("ccpaApplies"),country:(v("country")||"").toUpperCase(),gameID:v("game_id"),gdprApplies:(b=(v("country")||"").toUpperCase(),h.includes(b)),contentGameID:void 0,specialCondition:v("special_condition"),iabcat:void 0,nonPersonalized:"y"===v("nonPersonalized"),familyFriendly:"y"===v("familyFriendly"),kioskMode:"y"===v("kioskMode")||!!(null===window||void 0===window?void 0:window.kioskMode),forceBidder:v("force_bidder")||"",cloudSaveGames:"y"===v("cloudsavegames")};const S=A;const x=function(){function e(){}return e.sendMessage=function(e,n,o){if(void 0===o&&(o=window.parent),!f(e,t.message)){var r=Object.keys(t.message).map((function(t){return"poki.message.".concat(t)}));throw new TypeError("Argument 'type' must be one of ".concat(r.join(", ")))}var i=n||{};S.gameID&&S.versionID&&(i.pokifordevs={game_id:S.gameID,game_version_id:S.versionID}),null==o||o.postMessage({type:e,content:i},"*")},e}();var T=function(){function t(){}return t.debug=!1,t.log=!1,t.init=function(e,n){var o,r,i=window.location.hostname;void 0===e&&("test"===(null===(r=null===(o=null===window||void 0===window?void 0:window.process)||void 0===o?void 0:o.env)||void 0===r?void 0:r.NODE_ENV)?(e=!1,void 0===n&&(n=!1)):"localhost"===i||"127.0.0.1"===i||"[::1]"===i||"launch.playcanvas.com"===i?(e=!0,void 0===n&&(n=!1)):(e=!1,void 0===n&&(n=!1))),S.isInspector||"qa-files.poki.com"===i?(e=!0,n=!0):i.endsWith(".poki-gdn.com")&&(e=!1,n=!1),S.debugMode&&(e=!0),S.logMode&&(n=!0),void 0===n&&(n=e),t.debug=e,t.log=n},t}();const E=T;var I=function(t){var e=new Array;return Object.keys(t).forEach((function(n){"object"==typeof t[n]?e=e.concat(I(t[n])):e.push(t[n])})),e};const C=I;var P=function(){return P=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},P.apply(this,arguments)},_=function(){function t(){}return t.clearEventListeners=function(){this.listeners={}},t.removeEventListener=function(t,e){if(Object.prototype.hasOwnProperty.call(this.listeners,t)){var n=this.listeners[t].indexOf(e);-1!==n&&this.listeners[t].splice(n,1)}},t.addEventListener=function(t,e,n){var o=this;if(void 0===n&&(n=!1),n=!!n,Object.prototype.hasOwnProperty.call(this.listeners,t)||(this.listeners[t]=[]),n){var r=function(n){o.removeEventListener.bind(o)(t,r),e(n)};this.listeners[t].push(r)}else this.listeners[t].push(e)},t.dispatchEvent=function(t,e){var n,o;void 0===e&&(e={}),E.debug&&"test"!==(null===(o=null===(n=null===window||void 0===window?void 0:window.process)||void 0===n?void 0:n.env)||void 0===o?void 0:o.NODE_ENV)&&console.info(t,e);for(var r=Object.keys(this.listeners),i=0;i<r.length;i++){var a=r[i];if(t===a)for(var s=this.listeners[a],c=0;c<s.length;c++)s[c](P(P({},this.videoDataAnnotations),e))}},t.addVideoDataAnnotations=function(t){this.videoDataAnnotations=P(P({},this.videoDataAnnotations),t)},t.getVideoDataAnnotations=function(){return this.videoDataAnnotations},t.clearVideoDataAnnotations=function(){this.videoDataAnnotations={}},t.listeners={},t.videoDataAnnotations={},t}();const L=_;var M=function(){return M=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},M.apply(this,arguments)};const D=function(t){var e;if("undefined"!=typeof window&&"undefined"!=typeof fetch){var n=L.getVideoDataAnnotations(),o=t.size;(null===(e=t.event)||void 0===e?void 0:e.startsWith("video-"))&&(o="640x360v");var r=M(M({},t),{size:o,opportunity_id:t.opportunityId||n.opportunityId,ad_unit_path:t.adUnitPath||n.adUnitPath,p4d_game_id:S.gameID,p4d_version_id:S.versionID,bidder:t.bidder||n.bidder,bid:t.bid||n.bid||0,error_code:t.errorCode,creative_id:t.creativeId||n.creativeId,experiment:S.experiment});E.debug?console.log("PokiAdServer Tracking: ",r):fetch("https://t.poki.io/adserver",{method:"POST",mode:"no-cors",body:JSON.stringify(r)})}};const R=function(t){return new Promise((function(e,n){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=t;var r=function(){o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(e(),o.onload=null,o.onreadystatechange=null)};o.onload=r,o.onreadystatechange=r,o.onerror=n,document.head.appendChild(o)}))};var O=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},B=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},N=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};var G,F=(G=0,function(){return G+=1,"u".concat("0000".concat((0|Math.pow(36*Math.random(),4)).toString(36)).slice(-4)).concat(G)});function V(t){for(var e=[],n=0,o=t.length;n<o;n++)e.push(t[n]);return e}function z(t){return"style"in t}var j=function(t,e){if(t instanceof e)return!0;var n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||j(n,e))},H=new Set(["cx","cy","x","y","r","rx","ry","d","fill","alignment-baseline","baseline-shift","clip-rule","color-interpolation","color-interpolation-filters","color-rendering","dominant-baseline","fill-opacity","fill-rule","flood-color","flood-opacity","glyph-orientation-horizontal","glyph-orientation-vertical","lighting-color","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","vector-effect"]),q={html:void 0,svg:void 0};function U(t,e){var n;void 0===e&&(e={});var o=j(t,SVGElement)?"svg":"html",r=q[o];if(r)return r;var i=null!==(n=e.includeStyleProperties)&&void 0!==n?n:V(window.getComputedStyle(document.documentElement)),a="html"===o?i.filter((function(t){return!H.has(t)})):N([],i,!0);return q[o]=a,a}function K(t,e){var n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function W(t,e){void 0===e&&(e={});var n,o,r,i=e.width||(o=K(n=t,"border-left-width"),r=K(n,"border-right-width"),n.clientWidth+o+r),a=e.height||function(t){var e=K(t,"border-top-width"),n=K(t,"border-bottom-width");return t.clientHeight+e+n}(t);return{width:i,height:a}}var Y=16384;function Q(t){return new Promise((function(e,n){var o=new Image;o.decode=function(){return e(o)},o.onload=function(){return e(o)},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=t}))}function J(t){return O(this,void 0,void 0,(function(){return B(this,(function(e){return[2,Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(t)})).then(encodeURIComponent).then((function(t){return"data:image/svg+xml;charset=utf-8,".concat(t)}))]}))}))}function X(t,e,n){return O(this,void 0,void 0,(function(){var o,r,i;return B(this,(function(a){return o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),i=document.createElementNS(o,"foreignObject"),r.setAttribute("width","".concat(e)),r.setAttribute("height","".concat(n)),r.setAttribute("viewBox","0 0 ".concat(e," ").concat(n)),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(t),[2,J(r)]}))}))}function Z(t,e,n,o){var r=".".concat(t,":").concat(e),i=n.cssText?function(t){var e=t.getPropertyValue("content");return"".concat(t.cssText," content: '").concat(e.replace(/'|"/g,""),"';")}(n):function(t,e){return U(document.documentElement,e).map((function(e){var n=t.getPropertyValue(e),o=t.getPropertyPriority(e);return"".concat(e,": ").concat(n).concat(o?" !important":"",";")})).join(" ")}(n,o);return document.createTextNode("".concat(r,"{").concat(i,"}"))}function $(t,e,n,o){var r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(""!==i&&"none"!==i){var a=F();try{e.className="".concat(e.className," ").concat(a)}catch(t){return}var s=document.createElement("style");s.appendChild(Z(a,n,r,o)),e.appendChild(s)}}var tt="application/font-woff",et="image/jpeg",nt={woff:tt,woff2:tt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:et,jpeg:et,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ot(t){var e=function(t){var e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return nt[e]||""}var rt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},it=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function at(t){return-1!==t.search(/^(data:)/)}function st(t,e){return"data:".concat(e,";base64,").concat(t)}function ct(t,e,n){return rt(this,void 0,void 0,(function(){var o,r;return it(this,(function(i){switch(i.label){case 0:return[4,fetch(t,e)];case 1:if(404===(o=i.sent()).status)throw new Error('Resource "'.concat(o.url,'" not found'));return[4,o.blob()];case 2:return r=i.sent(),[2,new Promise((function(t,e){var i=new FileReader;i.onerror=e,i.onloadend=function(){try{t(n({res:o,result:i.result}))}catch(t){e(t)}},i.readAsDataURL(r)}))]}}))}))}var ut={};function lt(t,e,n){return rt(this,void 0,void 0,(function(){var o,r,i,a,s;return it(this,(function(c){switch(c.label){case 0:if(o=function(t,e,n){var o=t.replace(/\?.*/,"");return n&&(o=t),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),e?"[".concat(e,"]").concat(o):o}(t,e,n.includeQueryParams),null!=ut[o])return[2,ut[o]];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,ct(t,n.fetchRequestInit,(function(t){var n=t.res,o=t.result;return e||(e=n.headers.get("Content-Type")||""),function(t){return t.split(/,/)[1]}(o)}))];case 2:return i=c.sent(),r=st(i,e),[3,4];case 3:return a=c.sent(),r=n.imagePlaceholder||"",s="Failed to fetch resource: ".concat(t),a&&(s="string"==typeof a?a:a.message),s&&console.warn(s),[3,4];case 4:return ut[o]=r,[2,r]}}))}))}var dt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},pt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function ft(t){return dt(this,void 0,void 0,(function(){var e,n;return pt(this,(function(o){switch(o.label){case 0:try{if(t.getContext("2d"))return[2,Q(t.toDataURL())]}catch(t){}return 0===t.width||0===t.height?[2,Q("data:,")]:((e=document.createElement("canvas").getContext("2d",{alpha:!0})).canvas.width=t.width,e.canvas.height=t.height,n=e.getImageData(0,0,e.canvas.width,e.canvas.height),[4,new Promise((function(o){try{requestAnimationFrame((function(){var r=document.createElement("canvas").getContext("webgl2"),i=r.createTexture(),a=r.createFramebuffer();r.bindTexture(r.TEXTURE_2D,i),r.bindFramebuffer(r.FRAMEBUFFER,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0),r.readPixels(0,0,t.width,t.height,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(n.data.buffer)),e.putImageData(n,0,0),r.deleteTexture(i),r.deleteFramebuffer(a);var s=r.getExtension("WEBGL_lose_context");s&&s.loseContext(),o(e.canvas.toDataURL())}))}catch(t){o("data:,")}}))]);case 1:return[2,Q(o.sent())]}}))}))}function ht(t,e){return dt(this,void 0,void 0,(function(){var n,o,r,i;return pt(this,(function(a){switch(a.label){case 0:return t.currentSrc?(n=document.createElement("canvas"),o=n.getContext("2d"),n.width=t.clientWidth,n.height=t.clientHeight,null==o||o.drawImage(t,0,0,n.width,n.height),[2,Q(n.toDataURL())]):(r=t.poster,i=ot(r),[4,lt(r,i,e)]);case 1:return[2,Q(a.sent())]}}))}))}function vt(t,e){return dt(this,void 0,void 0,(function(){var n;return pt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),(null===(n=null==t?void 0:t.contentDocument)||void 0===n?void 0:n.body)?[4,wt(t.contentDocument.body,e,!0)]:[3,2];case 1:return[2,o.sent()];case 2:return[3,4];case 3:return o.sent(),[3,4];case 4:return[2,t.cloneNode(!1)]}}))}))}var gt=function(t){var e;return"SLOT"===(null===(e=t.tagName)||void 0===e?void 0:e.toUpperCase())},mt=function(t){return null!=t.tagName&&"SVG"===t.tagName.toUpperCase()};function yt(t,e,n){return function(t,e,n){var o=e.style;if(o){var r=window.getComputedStyle(t);r.cssText?(o.cssText=r.cssText,o.transformOrigin=r.transformOrigin):U(t,n).forEach((function(n){var i=r.getPropertyValue(n);if("font-size"===n&&i.endsWith("px")){var a=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i="".concat(a,"px")}j(t,HTMLIFrameElement)&&"display"===n&&"inline"===i&&(i="block"),"d"===n&&e.getAttribute("d")&&(i="path(".concat(e.getAttribute("d"),")")),o.setProperty(n,i,r.getPropertyPriority(n))}))}}(t,e,n),j(t,HTMLElement)&&j(e,HTMLElement)&&(function(t,e){j(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),j(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function(t,e){if(j(t,HTMLSelectElement)){var n=e,o=Array.from(n.children).find((function(e){return t.value===e.getAttribute("value")}));o&&o.setAttribute("selected","")}}(t,e),function(t,e,n){$(t,e,":before",n),$(t,e,":after",n)}(t,e,n),n.patchScroll)?function(t,e){if(0===t.scrollTop&&0===t.scrollLeft||!e.children)return e;for(var n=0;n<e.children.length;n+=1){var o=e.children[n];if(o.children){var r=o.style.transform,i=new DOMMatrix(r),a=i.a,s=i.b,c=i.c,u=i.d;i.a=1,i.b=0,i.c=0,i.d=1,i.translateSelf(-t.scrollLeft,-t.scrollTop),i.a=a,i.b=s,i.c=c,i.d=u,o.style.transform=i.toString()}}return e}(t,e):e}function wt(t,e,n){return dt(this,void 0,void 0,(function(){return pt(this,(function(o){return n||!e.filter||e.filter(t)?z(t)?[2,Promise.resolve(t).then((function(t){return function(t,e){return dt(this,void 0,void 0,(function(){return pt(this,(function(n){return j(t,HTMLCanvasElement)?[2,ft(t)]:j(t,HTMLVideoElement)?[2,ht(t,e)]:j(t,HTMLIFrameElement)?[2,vt(t,e)]:[2,t.cloneNode(mt(t))]}))}))}(t,e)})).then((function(n){return function(t,e,n){return dt(this,void 0,void 0,(function(){var o,r,i;return pt(this,(function(a){switch(a.label){case 0:return mt(e)?[2,e]:(o=[],0===(o=gt(t)&&t.assignedNodes?V(t.assignedNodes()):j(t,HTMLIFrameElement)&&(null===(r=t.contentDocument)||void 0===r?void 0:r.body)?V(t.contentDocument.body.childNodes):V(("shadowRoot"in t&&null!==(i=t.shadowRoot)&&void 0!==i?i:t).childNodes)).length||j(t,HTMLVideoElement)?[2,e]:[4,o.reduce((function(t,o){return t.then((function(){return wt(o,n)})).then((function(t){t&&e.appendChild(t)}))}),Promise.resolve())]);case 1:return a.sent(),[2,e]}}))}))}(t,n,e)})).then((function(n){return yt(t,n,e)})).then((function(t){return function(t,e){return dt(this,void 0,void 0,(function(){var n,o,r,i,a,s,c,u,l,d,p,f,h;return pt(this,(function(v){switch(v.label){case 0:if(0===(n=t.querySelectorAll?t.querySelectorAll("use"):[]).length)return[2,t];o={},h=0,v.label=1;case 1:return h<n.length?(r=n[h],(i=r.getAttribute("xlink:href"))?(a=t.querySelector(i),s=document.querySelector(i),a||!s||o[i]?[3,3]:(c=o,u=i,[4,wt(s,e,!0)])):[3,3]):[3,4];case 2:c[u]=v.sent(),v.label=3;case 3:return h++,[3,1];case 4:if((l=Object.values(o)).length){for(d="http://www.w3.org/1999/xhtml",(p=document.createElementNS(d,"svg")).setAttribute("xmlns",d),p.style.position="absolute",p.style.width="0",p.style.height="0",p.style.overflow="hidden",p.style.display="none",f=document.createElementNS(d,"defs"),p.appendChild(f),h=0;h<l.length;h++)f.appendChild(l[h]);t.appendChild(p)}return[2,t]}}))}))}(t,e)}))]:[2,t.cloneNode(!1)]:[2,null]}))}))}var bt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},kt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},At=/url\((['"]?)([^'"]+?)\1\)/g,St=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,xt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Tt(t,e,n,o,r){return bt(this,void 0,void 0,(function(){var i,a,s,c;return kt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),i=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;var n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),e&&(o.href=e),r.href=t,r.href}(e,n):e,a=ot(e),s=void 0,r?[4,r(i)]:[3,2];case 1:return c=u.sent(),s=st(c,a),[3,4];case 2:return[4,lt(i,a,o)];case 3:s=u.sent(),u.label=4;case 4:return[2,t.replace((l=e,d=l.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),new RegExp("(url\\(['\"]?)(".concat(d,")(['\"]?\\))"),"g")),"$1".concat(s,"$3"))];case 5:return u.sent(),[3,6];case 6:return[2,t]}var l,d}))}))}function Et(t){return-1!==t.search(At)}function It(t,e,n){return bt(this,void 0,void 0,(function(){var o,r;return kt(this,(function(i){return Et(t)?(o=function(t,e){var n=e.preferredFontFormat;return n?t.replace(xt,(function(t){for(;;){var e=St.exec(t)||[],o=e[0],r=e[2];if(!r)return"";if(r===n)return"src: ".concat(o,";")}})):t}(t,n),r=function(t){var e=[];return t.replace(At,(function(t,n,o){return e.push(o),t})),e.filter((function(t){return!at(t)}))}(o),[2,r.reduce((function(t,o){return t.then((function(t){return Tt(t,o,e,n)}))}),Promise.resolve(o))]):[2,t]}))}))}var Ct=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Pt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function _t(t,e,n){return Ct(this,void 0,void 0,(function(){var o,r,i;return Pt(this,(function(a){switch(a.label){case 0:return(o=null===(i=e.style)||void 0===i?void 0:i.getPropertyValue(t))?[4,It(o,null,n)]:[3,2];case 1:return r=a.sent(),e.style.setProperty(t,r,e.style.getPropertyPriority(t)),[2,!0];case 2:return[2,!1]}}))}))}function Lt(t,e){return Ct(this,void 0,void 0,(function(){return Pt(this,(function(n){switch(n.label){case 0:return[4,_t("background",t,e)];case 1:return n.sent()?[3,3]:[4,_t("background-image",t,e)];case 2:n.sent(),n.label=3;case 3:return[4,_t("mask",t,e)];case 4:return n.sent()?[3,6]:[4,_t("mask-image",t,e)];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))}function Mt(t,e){return Ct(this,void 0,void 0,(function(){var n,o,r,i;return Pt(this,(function(a){switch(a.label){case 0:return n=j(t,HTMLImageElement),o=j(t,SVGImageElement),n&&!at(t.src)||o&&!at(t.href.baseVal)?[4,lt(r=n?t.src:t.href.baseVal,ot(r),e)]:[2];case 1:return i=a.sent(),[4,new Promise((function(e,o){t.onload=e,t.onerror=o;var r=t;r.decode&&(r.decode=e),"lazy"===r.loading&&(r.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i}))];case 2:return a.sent(),[2]}}))}))}function Dt(t,e){return Ct(this,void 0,void 0,(function(){var n,o;return Pt(this,(function(r){switch(r.label){case 0:return n=V(t.childNodes),o=n.map((function(t){return Rt(t,e)})),[4,Promise.all(o).then((function(){return t}))];case 1:return r.sent(),[2]}}))}))}function Rt(t,e){return Ct(this,void 0,void 0,(function(){return Pt(this,(function(n){switch(n.label){case 0:return z(t)?[4,Lt(t,e)]:[3,4];case 1:return n.sent(),[4,Mt(t,e)];case 2:return n.sent(),[4,Dt(t,e)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}var Ot=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Bt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Nt={};function Gt(t){return Ot(this,void 0,void 0,(function(){var e,n;return Bt(this,(function(o){switch(o.label){case 0:return null!=(e=Nt[t])?[2,e]:[4,fetch(t)];case 1:return[4,o.sent().text()];case 2:return n=o.sent(),e={url:t,cssText:n},Nt[t]=e,[2,e]}}))}))}function Ft(t,e){return Ot(this,void 0,void 0,(function(){var n,o,r,i,a=this;return Bt(this,(function(s){return n=t.cssText,o=/url\(["']?([^"')]+)["']?\)/g,r=n.match(/url\([^)]+\)/g)||[],i=r.map((function(r){return Ot(a,void 0,void 0,(function(){var i;return Bt(this,(function(a){return(i=r.replace(o,"$1")).startsWith("https://")||(i=new URL(i,t.url).href),[2,ct(i,e.fetchRequestInit,(function(t){var e=t.result;return n=n.replace(r,"url(".concat(e,")")),[r,e]}))]}))}))})),[2,Promise.all(i).then((function(){return n}))]}))}))}function Vt(t){if(null==t)return[];for(var e=[],n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,""),o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){if(null===(a=o.exec(n)))break;e.push(a[0])}n=n.replace(o,"");for(var r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){var a;if(null===(a=r.exec(n))){if(null===(a=i.exec(n)))break;r.lastIndex=i.lastIndex}else i.lastIndex=r.lastIndex;e.push(a[0])}return e}function zt(t,e){return Ot(this,void 0,void 0,(function(){var n,o;return Bt(this,(function(r){return n=[],o=[],t.forEach((function(n){if("cssRules"in n)try{V(n.cssRules||[]).forEach((function(t,r){if(t instanceof CSSImportRule){var i=r+1,a=Gt(t.href).then((function(t){return Ft(t,e)})).then((function(t){return Vt(t).forEach((function(t){try{n.insertRule(t,t.startsWith("@import")?i+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule2:t,error:e})}}))})).catch((function(t){console.error("Error loading remote css",t.toString())}));o.push(a)}}))}catch(i){var r=t.find((function(t){return null==t.href}))||document.styleSheets[0];null!=n.href&&o.push(Gt(n.href).then((function(t){return Ft(t,e)})).then((function(t){return Vt(t).forEach((function(t){r.insertRule(t,r.cssRules.length)}))})).catch((function(t){console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",i)}})),[2,Promise.all(o).then((function(){return t.forEach((function(t){if("cssRules"in t)try{V(t.cssRules||[]).forEach((function(t){n.push(t)}))}catch(e){console.error("Error while reading CSS rules from ".concat(t.href),e)}})),n}))]}))}))}function jt(t){return t.filter((function(t){return t instanceof CSSFontFaceRule})).filter((function(t){return Et(t.style.getPropertyValue("src"))}))}function Ht(t,e){return Ot(this,void 0,void 0,(function(){return Bt(this,(function(n){switch(n.label){case 0:if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");return[4,zt(V(t.ownerDocument.styleSheets),e)];case 1:return[2,jt(n.sent())]}}))}))}function qt(t,e){return Ot(this,void 0,void 0,(function(){var n;return Bt(this,(function(o){switch(o.label){case 0:return[4,Ht(t,e)];case 1:return n=o.sent(),[4,Promise.all(n.map((function(t){var n=t.parentStyleSheet?t.parentStyleSheet.href:null;return It(t.cssText,n,e)})))];case 2:return[2,o.sent().join("\n")]}}))}))}function Ut(t,e){return Ot(this,void 0,void 0,(function(){var n,o,r,i,a;return Bt(this,(function(s){switch(s.label){case 0:return null==e.fontEmbedCSS?[3,1]:(o=e.fontEmbedCSS,[3,5]);case 1:return e.skipFonts?(r=null,[3,4]):[3,2];case 2:return[4,qt(t,e)];case 3:r=s.sent(),s.label=4;case 4:o=r,s.label=5;case 5:return(n=o)&&(i=document.createElement("style"),a=document.createTextNode(n),i.appendChild(a),t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)),[2]}}))}))}var Kt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Wt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Yt(t){return Kt(this,arguments,void 0,(function(t,e){var n,o,r,i;return void 0===e&&(e={}),Wt(this,(function(a){switch(a.label){case 0:return n=W(t,e),o=n.width,r=n.height,[4,wt(t,e,!0)];case 1:return[4,Ut(i=a.sent(),e)];case 2:return a.sent(),[4,Rt(i,e)];case 3:return a.sent(),function(t,e){var n=t.style;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width="".concat(e.width,"px")),e.height&&(n.height="".concat(e.height,"px"));var o=e.style;null!=o&&Object.keys(o).forEach((function(t){n[t]=o[t]}))}(i,e),[4,X(i,o,r)];case 4:return[2,a.sent()]}}))}))}function Qt(t){return Kt(this,arguments,void 0,(function(t,e){var n,o,r,i,a,s,c,u,l;return void 0===e&&(e={}),Wt(this,(function(d){switch(d.label){case 0:return n=W(t,e),o=n.width,r=n.height,[4,Yt(t,e)];case 1:return[4,Q(d.sent())];case 2:return i=d.sent(),a=document.createElement("canvas"),s=a.getContext("2d"),c=window.devicePixelRatio||1,u=e.canvasWidth||o,l=e.canvasHeight||r,a.width=u*c,a.height=l*c,e.skipAutoScale||function(t){(t.width>Y||t.height>Y)&&(t.width>Y&&t.height>Y?t.width>t.height?(t.height*=Y/t.width,t.width=Y):(t.width*=Y/t.height,t.height=Y):t.width>Y?(t.height*=Y/t.width,t.width=Y):(t.width*=Y/t.height,t.height=Y))}(a),a.style.width="".concat(u),a.style.height="".concat(l),e.backgroundColor&&(s.fillStyle=e.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,a.width,a.height),[2,a]}}))}))}function Jt(t){return Kt(this,arguments,void 0,(function(t,e){return void 0===e&&(e={}),Wt(this,(function(n){switch(n.label){case 0:return[4,Qt(t,e)];case 1:return[2,n.sent().toDataURL()]}}))}))}function Xt(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function Zt(t){try{var e=new WeakSet;return JSON.stringify(t,(function(t,n){if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular]";e.add(n)}return n}))}catch(e){try{return t.toString()}catch(t){return"[Object]"}}}var $t,te=[],ee=function(t){var e=!1,n=0;return function(o){if(e)n++;else{e=!0,setTimeout((function(){e=!1}),t);var r=n;n=0,o(r)}}}(100),ne=console.error,oe=["Audio callback had starved sending audio by"],re=!1,ie=Math.random().toString(36).substr(2,9);function ae(t,e){void 0===e&&(e=!0),S.gameID&&!S.isPlayground?ee((function(e){try{var n=t.message||Zt(t);te.push({n:t.name,m:n,s:JSON.stringify(t.stack)}),$t&&$t({name:t.name,message:n,stack:t.stack});var o=JSON.stringify({gid:S.gameID,vid:S.versionID,ve:7,n:t.name,m:n+(e?" (skipped ".concat(e," errors)"):""),s:JSON.stringify(t.stack),ui:ie}),r="https://t.poki.io/ge";if(navigator.sendBeacon)navigator.sendBeacon(r,o);else{var i=new XMLHttpRequest;i.open("POST",r,!0),i.send(o)}}catch(t){console.error(t)}})):e&&console.log(t)}function se(t){Xt(t.reason)?ae(t.reason):ae({name:"unhandledrejection",message:JSON.stringify(t.reason)||Zt(t)})}function ce(t){Xt(t.error)?ae(t.error):ae(t)}function ue(){if(!re){re=!0,window.addEventListener("unhandledrejection",se),window.addEventListener("error",ce);try{console.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Zt(t);oe.some((function(t){return n.includes(t)}))||ae({name:"console.error",message:n},!1),ne.apply(console,t)}}catch(t){}}}"undefined"==typeof window||S.isPlayground||ue();var le="pokiSdkContainer",de="pokiSdkHidden",pe="pokiSdkInsideContainer",fe="pokiSdkPauseButtonContainer",he="pokiSdkPauseButton",ve="pokiSdkPauseButtonBG",ge="pokiSdkStartAdButton",me="pokiSdkProgressBar",ye="pokiSdkSpinnerContainer",we="pokiSdkVisible",be="pokiSDKAdContainer",ke=("\n.".concat(le," {\n\toverflow: hidden;\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1000;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.").concat(le,".").concat("pokiSdkFixed"," {\n\tposition: fixed;\n}\n\n.").concat(le,".").concat(we," {\n\tdisplay: block;\n}\n\n.").concat(le,".").concat(de,",\n.").concat(ye,".").concat(de," {\n\tdisplay: none;\n}\n\n.").concat(le,".").concat(de,",\n.").concat(ye," {\n\tpointer-events: none;\n}\n\n.").concat(ye," {\n\tz-index: 10;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: url('https://a.poki-cdn.com/images/thumb_anim_2x.gif') 50% 50% no-repeat;\n\tuser-select: none;\n}\n\n.").concat(pe," {\n\tbackground: #000;\n\tposition: relative;\n\tz-index: 1;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\n\topacity: 0;\n\t-webkit-transition: opacity 0.5s ease-in-out;\n\t-moz-transition: opacity 0.5s ease-in-out;\n\t-ms-transition: opacity 0.5s ease-in-out;\n\t-o-transition: opacity 0.5s ease-in-out;\n\ttransition: opacity 0.5s ease-in-out;\n}\n\n.").concat(le,".").concat(we," .").concat(pe," {\n\topacity: 1;\n}\n\n.").concat(be,", .").concat("pokiSdkVideoContainer"," {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.").concat(ge," {\n\tposition: absolute;\n\tz-index: 9999;\n\ttop: 0;\n\n\tpadding-top: 10%;\n\twidth: 100%;\n\theight: 100%;\n\ttext-align: center;\n\tcolor: #FFF;\n\n\tfont: 700 15pt 'Arial', sans-serif;\n\tfont-weight: bold;\n\tletter-spacing: 1px;\n\ttransition: 0.1s ease-in-out;\n\tline-height: 1em;\n}\n\n.").concat(fe," {\n\tcursor:pointer;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 10;\n}\n\n.").concat(ve," {\n    content: '';\n    background: rgba(0, 43, 80, 0.5);\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n\tz-index: 11;\n}\n\n.").concat(fe,":hover .").concat(ve," {\n\tbackground: rgba(0, 43, 80, 0.7);\n}\n\n.").concat(he," {\n\tposition: absolute;\n    top: 50%;\n    left: 50%;\n    z-index: 12;\n}\n\n.").concat(he,":before {\n\tcontent: '';\n\tposition: absolute;\n\twidth: 100px;\n\theight: 100px;\n\tdisplay: block;\n\tborder: 2px solid #fff;\n\tborder-radius: 50%;\n\tuser-select: none;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\ttransition: background-color 0.5s ease;\n\tanimation: 1s linear infinite pokiPulse;\n\tz-index: 12;\n}\n\n.").concat(he,":after {\n\tcontent: '';\n\tposition: absolute;\n\tdisplay: block;\n\tbox-sizing: border-box;\n\tborder-color: transparent transparent transparent #fff;\n\tborder-style: solid;\n\tborder-width: 26px 0 26px 40px;\n\tpointer-events: none;\n\tanimation: 1s linear infinite pokiPulse;\n\tleft: 6px;\n\tz-index: 12;\n}\n\n@keyframes pokiPulse {\n\t0% {\n\t\ttransform: translate(-50%, -50%) scale(0.95);\n\t}\n\t70% {\n\t\ttransform: translate(-50%, -50%) scale(1.1);\n\t}\n\t100% {\n\t\ttransform: translate(-50%, -50%) scale(0.95);\n\t}\n}\n\n.").concat("pokiSdkProgressContainer"," {\n\tbackground: #B8C7DD;\n\twidth: 100%;\n\theight: 5px;\n\tposition: absolute;\n\tbottom: 0;\n\tz-index: 9999;\n}\n\n.").concat(me," {\n\tposition:relative;\n\tbottom:0px;\n\tbackground: #FFDC00;\n\theight: 100%;\n\twidth: 0%;\n\ttransition: width 0.5s;\n\ttransition-timing-function: linear;\n}\n\n.").concat(me,".").concat(we,", .").concat(fe,".").concat(we,", .").concat(ge,".").concat(we," {\n\tdisplay: block;\n\tpointer-events: auto;\n}\n\n.").concat(me,".").concat(de,", .").concat(fe,".").concat(de,", .").concat(ge,".").concat(de," {\n\tdisplay: none;\n\tpointer-events: none;\n}\n\n.").concat(be," .").concat("pokiSDKHouseAdContainer"," {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 99999;\n\tcursor: pointer;\n}\n\n"),function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))}),Ae=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Se=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},xe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ke(void 0,Se([],t,!0),void 0,(function(t){var e;return void 0===t&&(t=null),Ae(this,(function(n){switch(n.label){case 0:return[4,Ce()];case 1:return(e=n.sent())&&e.length>10?t?[4,Ee(e,t)]:[3,3]:[3,5];case 2:e=n.sent(),n.label=3;case 3:return[4,Te({screenshot:e})];case 4:return[2,n.sent()];case 5:return[2,null]}}))}))},Te=function(t){return ke(void 0,void 0,void 0,(function(){var e,n,o,r;return Ae(this,(function(i){switch(i.label){case 0:return e=t.screenshot,"https://api.poki.io/screenshot",n="https://poki-user-content.com/",[4,fetch("https://api.poki.io/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})})];case 1:o=i.sent(),i.label=2;case 2:return i.trys.push([2,5,,6]),200!==o.status?[3,4]:[4,o.json()];case 3:return r=i.sent(),[2,n+r.source];case 4:return[3,6];case 5:return i.sent(),[3,6];case 6:return[2,null]}}))}))},Ee=function(t,e){return ke(void 0,void 0,void 0,(function(){var n,o,r,i,a,s,c,u,l,d,p,f,h,v,g,m,y,w,b,k,A,S,x;return Ae(this,(function(T){switch(T.label){case 0:return n=e.title,o=e.thumbnail,(r=new Image).crossOrigin="Anonymous",i=new Promise((function(t){r.onload=function(){return t(r)}})),r.src=t,(a=new Image).crossOrigin="Anonymous",s=new Promise((function(t){a.onload=function(){return t(a)}})),a.src="https://a.poki-cdn.com/images/screenshot-frame.png",(c=new Image).crossOrigin="Anonymous",u=new Promise((function(t){c.onload=function(){return t(c)}})),128,c.src="https://img.poki-cdn.com/cdn-cgi/image/quality=78,width=".concat(128,",height=").concat(128,",fit=cover,f=auto/").concat(o),l=new FontFace("TorusBold","url(https://a.poki-cdn.com/fonts/torus-bold-latin.woff2)"),d=l.load(),[4,Promise.all([i,s,u,d])];case 1:return p=T.sent(),f=p[0],h=p[1],v=p[2],g=p[3],(m=document.createElement("canvas")).width=f.width,m.height=f.height,(y=m.getContext("2d")).drawImage(f,0,0),w=m.width/h.width,b=h.height*w,k=m.height-b,y.drawImage(h,0,k,m.width,b),A=v.height*w,Ie(y,v,64*w,k+20*w,A,A,24*w),document.fonts.add(g),S=226*w,x=k+68*w,y.textAlign="left",y.textBaseline="top",y.fillStyle="#002b50",y.font="700 ".concat(56*w,"px TorusBold,sans-serif"),y.fillText(n,S,x),[2,m.toDataURL()]}}))}))},Ie=function(t,e,n,o,r,i,a){t.save(),t.beginPath();var s=n+r,c=o+i;t.moveTo(n+a,o),t.lineTo(s-a,o),t.quadraticCurveTo(s,o,s,o+a),t.lineTo(s,c-a),t.quadraticCurveTo(s,c,s-a,c),t.lineTo(n+a,c),t.quadraticCurveTo(n,c,n,c-a),t.lineTo(n,o+a),t.quadraticCurveTo(n,o,n+a,o),t.closePath(),t.clip(),t.drawImage(e,n,o,r,i),t.restore()},Ce=function(){return ke(void 0,void 0,void 0,(function(){var t,e,n,o,r;return Ae(this,(function(i){switch(i.label){case 0:return t=function(t){var e;return!["VIDEO","TEXTAREA","SCRIPT","NOSCRIPT","INPUT","IFRAME"].includes(t.nodeName)&&(!("IMG"===t.nodeName&&!t.getAttribute("src"))&&!(null===(e=t.classList)||void 0===e?void 0:e.contains(le)))},e=document.body.style.minWidth,n=document.body.style.minHeight,document.body.style.minWidth="100%",document.body.style.minHeight="100%",[4,Jt(document.body,{filter:t,width:window.innerWidth,height:window.innerHeight,backgroundColor:"#fff"})];case 1:return(o=i.sent())&&o.length<10?(r=document.body.style.position,document.body.style.position="fixed",[4,Jt(document.body,{filter:t,width:window.innerWidth,height:window.innerHeight,backgroundColor:"#fff"})]):[3,3];case 2:o=i.sent(),document.body.style.position=r,i.label=3;case 3:return document.body.style.minWidth=e,document.body.style.minHeight=n,[2,o]}}))}))},Pe=function(t){return ke(void 0,void 0,void 0,(function(){var e,n,o,r,i,a,s;return Ae(this,(function(c){switch(c.label){case 0:e=["VIDEO","TEXTAREA","SCRIPT","NOSCRIPT","INPUT","IFRAME"],t||e.push("CANVAS"),n=function(t){var n;return!e.includes(t.nodeName)&&(!("IMG"===t.nodeName&&!t.getAttribute("src"))&&!(null===(n=t.classList)||void 0===n?void 0:n.contains(le)))},o=document.body.style.minWidth,r=document.body.style.minHeight,i=document.body.style.backgroundColor,document.body.style.minWidth="100%",document.body.style.minHeight="100%",document.body.style.backgroundColor="transparent",c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Yt(document.body,{filter:n,width:window.innerWidth,height:window.innerHeight,backgroundColor:"#fff"})];case 2:return a=c.sent(),[3,4];case 3:return s=c.sent(),console.error(s),[3,4];case 4:return document.body.style.minWidth=o,document.body.style.minHeight=r,document.body.style.backgroundColor=i,[2,a]}}))}))};const _e=function(){return"undefined"!=typeof navigator&&/(iPad|iPhone|iPod)/gi.test(navigator.userAgent)};var Le="MacIntel"===window.navigator.platform&&void 0!==window.navigator.standalone&&navigator.maxTouchPoints>1,Me=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),De=g()||m()||Le,Re=!1,Oe=new Image;Oe.src="data:image/png;base64,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",Oe.onload=function(){Re=!0};var Be=function(){function t(t){var e=this;this.image=null,this.ready=!1,this.drawSize=0,this.previousMouseDown=!1,this.mouseDrawSizeClickIncrease=20,this.minimumClickSize=60,this.maximumClickSize=100,this.holdMouseSize=40,this.sizeDecrease=2,this.image=new Image,this.image.src=t,this.image.onload=function(){e.ready=!0}}return t.prototype.update=function(t){t&&!this.previousMouseDown&&(this.drawSize+=this.mouseDrawSizeClickIncrease,this.drawSize=Math.min(Math.max(this.drawSize,this.minimumClickSize),this.maximumClickSize)),this.drawSize-=this.sizeDecrease,this.drawSize=t?Math.max(this.drawSize,this.holdMouseSize):Math.max(this.drawSize,0),this.previousMouseDown=t},t.prototype.draw=function(t,e,n){var o=this.drawSize/2,r=e-o,i=n-o;t.drawImage(this.image,0,0,this.image.width,this.image.height,r,i,this.drawSize,this.drawSize)},t.prototype.destroy=function(){this.image=null,this.ready=!1},t}(),Ne=new Be("data:image/png;base64,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"),Ge=new Be("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADBSURBVHgBvdZdEcIwDAfwZAqQgAQs4AAHIAEHzAlSWgfMARZAQUjZ9rDbR5M22f+uzdaX30OvaREUIaIDlxuPVCMiRrAOIw+a5zngrsiYlwmWQWwwIVKHKZEyrBDRYZWIDDNCtjFjZBlzQsaEZCB/HLm+wTfnhqcT+OfawD75Jijy+IBvuv/M+3Qnv4QJyQst2Wf1LFli2e5ggYn7XQ2m7uAlWPGdpMGqb1kJZvZuaN2RDBakCIIi1Hf6y/DbaR6QP+1P5pe98AyNAAAAAElFTkSuQmCC");function Fe(t,e,n,o,r,i){if(Re&&i&&Oe){var a=Math.max(o,r);if(function(t,e,n,o,r,i){[Ne,Ge].forEach((function(a){if(a.ready&&i){var s=a===Ne?e:n;a.update(s);var c=t.x*o,u=t.y*r;a.draw(i,c,u)}}))}(t,e,n,o,r,i),!De){var s=.5*a;i.drawImage(Oe,0,0,Oe.width,Oe.height,t.x*o,t.y*r,Oe.width*s,Oe.height*s)}}}var Ve=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},ze=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},je=!1,He=[],qe=null,Ue=document.createElement("canvas"),Ke=null,We=null,Ye=null,Qe=null,Je=null,Xe=null,Ze=0;Ue.setAttribute("data-poki-no-playtest","true"),Ue.addEventListener("webglcontextlost",(function(){console.info("%cPOKI_PLAYTEST:%c streamCanvas context lost","font-weight: bold",""),Ue=document.createElement("canvas"),Ke=null}));var $e={x:0,y:0},tn=!1,en=!1,nn=!1,on=!1,rn="",an=1,sn=1,cn=-1,un=-1;function ln(t){if(null!==qe&&He.length){var e=He[0],n=e.width/qe.width,o=e.height/qe.height,r=(t.clientX-qe.left)*n,i=(t.clientY-qe.top)*o;$e.x=Math.max(0,Math.min(r,e.width)),$e.y=Math.max(0,Math.min(i,e.height))}}var dn=function(t){He.length&&Ue&&ln(t)},pn=function(t){He.length&&Ue&&(0===t.button?(tn=!0,en=!1):2===t.button?(nn=!0,on=!1):1===t.button&&(tn=!0,en=!1,nn=!0,on=!1),ln(t))},fn=function(t){0===t.button?en=!0:2===t.button?on=!0:1===t.button&&(en=!0,on=!0)};function hn(){var t=rn;t&&Ue&&Ke&&(Ke.fillStyle="rgba(255, 255, 255, 0.5)",Ke.fillRect(0,0,Ue.width,Ue.height),Ke.font="48px Arial",Ke.fillStyle="#009cff",Ke.textAlign="center",Ke.fillText(t,Ue.width/2,Ue.height/2))}function vn(t){if(Ue&&He.length){var e=He[0],n=e.width,o=e.height;if(n!==cn||o!==un||t){cn=n,un=o;var r=(qe=e.getBoundingClientRect()).width,i=qe.height;if(0!==r&&0!==i||(r=n,i=o),r>i)if(_e()||Le||Me)r>(a=Le?1024:g()||m()||_e()?640:1280)&&(r=a,i=Math.round(a*(screen.height/screen.width)));else r>(a=g()||m()?640:1280)&&(r=a,i=Math.round(a*(screen.height/screen.width)));else if(_e()||Le||Me){i>(a=Le?1024:g()||m()||_e()?640:1280)&&(i=a,r=Math.round(a*(screen.width/screen.height)))}else{var a;i>(a=g()||m()?640:1280)&&(i=a,r=Math.round(a*(screen.width/screen.height)))}an=r/n,sn=i/o,(t||Ue.width!==r||Ue.height!==i)&&(Ue.width=r,Ue.height=i,console.info("%cPOKI_PLAYTEST:%c capturing at ".concat(r,"x").concat(i," (").concat(n,"x").concat(o,")"),"font-weight: bold",""))}}}function gn(t){return Ve(this,void 0,void 0,(function(){var e,n,o;return ze(this,(function(r){switch(r.label){case 0:if(!Ue)return[2];if(Je||(Je=document.createElement("canvas"),0===He.length?(Je.width=Ue.width,Je.height=Ue.height):(Je.width=He[0].width,Je.height=He[0].height),Je.addEventListener("contextlost",(function(){Je=null,Xe=null}))),!Xe&&!(Xe=Je.getContext("2d")))return[2];r.label=1;case 1:return r.trys.push([1,5,,6]),performance.now(),[4,Pe(t)];case 2:return(e=r.sent())&&e.length>10?[4,new Promise((function(t,n){var o=new Image;o.decode=function(){return t(o)},o.onload=function(){return t(o)},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e}))]:[3,4];case 3:n=r.sent(),requestAnimationFrame((function(){Je&&Xe&&(Xe.clearRect(0,0,Je.width,Je.height),Xe.drawImage(n,0,0,Je.width,Je.height,0,0,Je.width,Je.height),Ze=0)})),r.label=4;case 4:return[3,6];case 5:return o=r.sent(),console.error("%cPOKI_PLAYTEST:%c ui canvas error","font-weight: bold","",o.name,o.message,o.stack),Ze++,po.__playtestCaptureHTML===co&&Ze>10&&(je=!0),[3,6];case 6:return[2]}}))}))}function mn(t){rn=t}function yn(){var t=po.__playtestCanvas;if(null==t?void 0:t.length)return t;if(po.__playtestCaptureHTML===co){var e=document.createElement("canvas");return e.width=window.innerWidth,e.height=window.innerHeight,e.setAttribute("data-poki-html-canvas","true"),[e]}var n=0,o=Array.from(document.getElementsByTagName("canvas")),r=[];return o.forEach((function(t){if("true"!==t.getAttribute("data-poki-no-playtest")){var e=getComputedStyle(t),o=e.width,i=e.height,a=parseInt(o,10)*parseInt(i,10);a>=n&&function(t){if(!t)return!1;for(var e=t,n=!0;e&&e!==document.body;){var o=window.getComputedStyle(e);if("none"===o.display)return!1;if("hidden"===o.visibility)return!1;if(n&&(0===e.offsetWidth||0===e.offsetHeight))return!1;"absolute"===o.position&&(n=!1),e=e.parentElement}var r=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth;return!(r.right<0||r.bottom<0||r.left>a||r.top>i)}(t)&&(a>n&&(r=[]),r.push({canvas:t,style:e,index:r.length}),n=a)}})),r.sort((function(t,e){var n=parseInt(t.style.zIndex,10)||0,o=parseInt(e.style.zIndex,10)||0;return n<o?-1:n>o?1:t.index-e.index})),r.map((function(t){return t.canvas}))}function wn(t){if(!Ue)return null;He=t,vn(!0);var e=Ue.captureStream(24);window.addEventListener("pointermove",dn,{capture:!0,passive:!0}),window.addEventListener("pointerdown",pn,{capture:!0,passive:!0}),window.addEventListener("pointerup",fn,{capture:!0,passive:!0}),window.addEventListener("contextmenu",fn,{capture:!0,passive:!0});var n=null,o=null,r=null,i=null,a=null,s=0,c=null,u=null;if(po.__playtestCaptureHTML===co){var l=0;a=setInterval((function(){if(Ue){He[0].width===window.innerWidth&&He[0].height===window.innerHeight||(He[0].width=window.innerWidth,He[0].height=window.innerHeight);var t=!1;if(document.getElementsByTagName("canvas").length>0&&(t=!0),!t){var e=function(t){for(var e=3&t.length,n=t.length-e,o=3432918353,r=461845907,i=0,a=0,s=0;s<n;)a=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24,++s,i=5*(i=(i^=a=(65535&(a=(a=(65535&a)*o+(((a>>>16)*o&65535)<<16)&4294967295)<<15|a>>>17))*r+(((a>>>16)*r&65535)<<16)&4294967295)<<13|i>>>19)+3864292196&4294967295;switch(a=0,e){case 3:a^=(255&t.charCodeAt(s+2))<<16;case 2:a^=(255&t.charCodeAt(s+1))<<8;case 1:i^=a=(65535&(a=(a=(65535&(a^=255&t.charCodeAt(s)))*o+(((a>>>16)*o&65535)<<16)&4294967295)<<15|a>>>17))*r+(((a>>>16)*r&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}(document.body.innerHTML);l!==e&&(l=e,t=!0)}t&&gn(!0)}}),1e3)}var d=function(){var t,e;if(je||!Ue||!He.length||s>10)return window.removeEventListener("pointermove",dn),window.removeEventListener("pointerdown",pn),window.removeEventListener("pointerup",fn),a&&(clearInterval(a),a=null),po.__playtestCaptureHTML="",Ue=null,Ke=null,He=[],Je=null,Xe=null,We=null,Ye=null,Qe=null,Ne.destroy(),Ge.destroy(),o&&(r&&o.deleteTexture(r),i&&o.deleteFramebuffer(i),null===(e=null===(t=o.getExtension("WEBGL_lose_context"))||void 0===t?void 0:t.loseContext)||void 0===e||e.call(t)),o=null,r=null,void(i=null);if(!function(){for(var t=0;t<He.length;t++)if(!document.body.contains(He[t])){if("true"===He[t].getAttribute("data-poki-html-canvas"))continue;return!1}return!0}())return console.info("%cPOKI_PLAYTEST:%c source canvasses not in DOM","font-weight: bold",""),void((He=yn()).length||(console.info("%cPOKI_PLAYTEST:%c no source canvasses found","font-weight: bold",""),s++,setTimeout(d,100)));if(!(n&&o&&r&&i)){if((n=document.createElement("canvas")).addEventListener("webglcontextlost",(function(){console.info("%cPOKI_PLAYTEST:%c glCanvas context lost","font-weight: bold",""),n=null,o=null})),!(o=n.getContext("webgl2")))return console.info("%cPOKI_PLAYTEST:%c glCanvas context creation failed","font-weight: bold",""),n=null,s++,void setTimeout(d,100);if(r=o.createTexture(),i=o.createFramebuffer(),!r||!i)return console.info("%cPOKI_PLAYTEST:%c glCanvas texture/framebuffer creation failed","font-weight: bold",""),n=null,s++,void setTimeout(d,100);o.bindTexture(o.TEXTURE_2D,r),o.bindFramebuffer(o.FRAMEBUFFER,i)}if(!Ke&&!(Ke=Ue.getContext("2d")))return console.info("%cPOKI_PLAYTEST:%c streamCanvas context creation failed","font-weight: bold",""),s++,void setTimeout(d,100);if(We||(We=document.createElement("canvas")).addEventListener("contextlost",(function(){console.info("%cPOKI_PLAYTEST:%c offScreenCanvas context lost","font-weight: bold",""),We=null,Ye=null,Qe=null})),Ye||(Ye=We.getContext("2d")),!Ye)return console.info("%cPOKI_PLAYTEST:%c offScreenCanvas context creation failed","font-weight: bold",""),s++,void setTimeout(d,100);if(s=0,vn(!1),po.__playtestCaptureHTML===so?(po.__playtestCaptureHTML="",gn(!1)):po.__playtestCaptureHTML===uo&&(po.__playtestCaptureHTML="",Je=null,Xe=null),Ye){Ke.clearRect(0,0,Ue.width,Ue.height);for(var u=0;u<He.length;u++){var l=He[u];We.width===l.width&&We.height===l.height||(We.width=l.width,We.height=l.height,Qe=null),Qe||(Qe=Ye.getImageData(0,0,We.width,We.height)),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r,0),o.readPixels(0,0,l.width,l.height,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array(Qe.data.buffer)),Ye.putImageData(Qe,0,0),Ke.drawImage(We,0,0,We.width,We.height,0,0,Ue.width,Ue.height)}}Je&&Ke.drawImage(Je,0,0,Je.width,Je.height,0,0,Ue.width,Ue.height),Fe($e,tn,nn,an,sn,Ke),tn&&en&&(tn=!1,en=!1),nn&&on&&(nn=!1,on=!1),hn(),c=requestAnimationFrame(d)};return c=requestAnimationFrame(d),window.addEventListener("visibilitychange",(function(){c&&(cancelAnimationFrame(c),c=null),u&&(clearTimeout(u),u=null),console.info("%cPOKI_PLAYTEST:%c visibility change","font-weight: bold","",document.visibilityState),"visible"===document.visibilityState?u=setTimeout((function(){rn="",c=requestAnimationFrame(d)}),500):(rn="Game in background",hn())})),e}var bn=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},kn=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},An='\n\t<template id="poki-playtest-template-markup">\n\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup-wrapper" id="poki-playtest-popup-wrapper">\n\t\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup">\n\t\t\t\t<header class="poki-playtest-popup-scope-reset poki-playtest-popup__header">\n\t\t\t\t\t<img class="poki-playtest-popup-scope-reset poki-playtest-popup__header__img" width="36" height="36" src="https://a.poki-cdn.com/playtest/playtest-icon.svg" alt="Lab icon">\n\t\t\t\t\t<h2 class="poki-playtest-popup-scope-reset poki-playtest-popup__header__title">Hey there, adventurer</h2>\n\t\t\t\t</header>\n\n\t\t\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup__content">\n\t\t\t\t\t<p>You found a mystery game and have been selected to test it out! When you join the playtest, we&apos;ll record your gameplay to see all the fun (and maybe some goofy) moments you encounter. This helps the developer figure out what rocks and what needs a little extra magic in their game. Don&apos;t worry, your gameplay recording will be deleted after 30 days.</p>\n\t\t\t\t\t<p>And hey, if you&apos;re not feeling it, no biggie - you can refuse the playtest and still play the game just like normal. For more information, please read our <a href="https://a.poki-cdn.com/playtest/2024.05.08_Poki_Playtest_Privacy_Statement.pdf" download="2024-05-08 Poki Playtest Privacy Statement.pdf" target="_blank">Privacy Statement Playtest</a>.</p>\n\t\t\t\t\t<h3>Do you consent to join the playtest of <span id="poki-playtest-popup-game-title">%GAME_TITLE%</span>?</h3>\n\t\t\t\t\t<p><small>Please note that this game has been uploaded independently by this game&apos;s developer and has not yet been verified by the Poki team. If you run into any trouble, contact us at <strong><a href="mailto:hello@poki.com">hello@poki.com</a></strong></small></p>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup__actions">\n\t\t\t\t\t<button type="button" id="poki-playtest-popup-reject" class="poki-playtest-popup-scope-reset poki-playtest-popup__button">No, thanks</button>\n\t\t\t\t\t<button type="button" id="poki-playtest-popup-resolve" class="poki-playtest-popup-scope-reset poki-playtest-popup__button">Yes, let\'s go</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template>\n',Sn='\n\t.poki-playtest-popup {\n\t\tall: unset;\n\n\t\t& *,\n\t\t& *::before,\n\t\t& *::after {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\t}\n\n\t.poki-playtest-popup {\n\t\tborder-radius: 16px;\n\t\tbackground: #FFF;\n\t\tbox-shadow: 0px 60px 24px 0px rgba(93, 107, 132, 0.03), 0px 34px 20px 0px rgba(93, 107, 132, 0.09), 0px 15px 15px 0px rgba(93, 107, 132, 0.15), 0px 4px 8px 0px rgba(93, 107, 132, 0.18);\n\n\t\tdisplay: flex;\n\t\tmax-width: 480px;\n\t\tmin-width: 320px;\n\t\twidth: 100%;\n\t\tpadding: 8px 0 16px 0;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tgap: 16px;\n\t\tcolor: #002B50;\n\n\t\tposition: fixed;\n\t\tz-index: 99999;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\n\t.poki-playtest-popup__header {\n\t\t\tdisplay: flex;\n\t\t\twidth: 100%;\n\t\t\tpadding: 8px 16px 16px;\n\t\t\talign-items: center;\n\t\t\tgap: 12px;\n\t\t\tborder-bottom: 2px solid #F0F5FC;\n\t}\n\n\t.poki-playtest-popup__header__img {\n\t\tall: unset;\n\t}\n\n\t.poki-playtest-popup__header__title {\n\t\tfont: 700 24px/1.16 Torus, sans-serif;\n\t\tmargin: 0;\n\t}\n\n\t.poki-playtest-popup__content {\n\t\tfont: 400 14px/1.57 "Proxima Nova", sans-serif;\n\t\tpadding: 0 16px;\n\n\t\ta {\n\t\t\tcolor: #0074E0;\n\t\t\tpointer-events: auto;\n\n\t\t\t&:hover {\n\t\t\t\tcolor: #009CFF;\n\t\t\t}\n\t\t}\n\n\t\tp {\n\t\t\tmargin: 8px 0 0;\n\n\t\t\t&:first-child {\n\t\t\t\tmargin-top: 0;\n\t\t\t}\n\n\t\t\tsmall {\n\t\t\t\tall: unset;\n\t\t\t}\n\n\t\t\t&:has(small) {\n\t\t\t\tcolor: #5D6B84;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tline-height: 1.33;\n\t\t\t\tletter-spacing: 0.3px;\n\t\t\t}\n\t\t}\n\n\t\th3 {\n\t\t\tfont-weight: 700;\n\t\t\tfont-size: 16px;\n\t\t\tline-height: 1.5;\n\t\t\tmargin: 16px 0 14px;\n\t\t}\n\t}\n\n\t.poki-playtest-popup__actions {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tpadding: 8px 16px 0;\n\t\tgap: 16px;\n\t\tjustify-content: center;\n\t}\n\n\t.poki-playtest-popup__button {\n\t\tdisplay: flex;\n\t\tpadding: 7px 24px 9px;\n\t\tborder: none;\n\t\tmargin: 0;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex: 1 0 0;\n\t\tborder-radius: 24px;\n\t\tbackground: #009CFF;\n\t\tcursor: pointer;\n\t\tpointer-events: auto;\n\n\t\tcolor: #FFF;\n\t\tfont: 700 16px/1.25 Torus, sans-serif;\n\n\t\t&:hover {\n\t\t\tbackground-color: #0074E0;\n\t\t}\n\t}\n\n\t.poki-playtest-popup-wrapper {\n\t\tall: unset;\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tbackground: #002B50AF;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 99998;\n\t}\n\n\t.poki-playtest-popup-scope-reset {\n\t\tletter-spacing: normal;\n\t\ttext-align: left;\n\t\ttext-decoration: none;\n\t\ttext-indent: 0;\n\t\ttext-shadow: none;\n\t\ttext-transform: none;\n\t\twhite-space: normal;\n\t\tword-spacing: normal;\n\t}\n';function xn(){var t,e,n,o=document.getElementById("poki-playtest-popup-reject"),r=document.getElementById("poki-playtest-popup-resolve");null==o||o.removeEventListener("pointerdown",xn),null==r||r.removeEventListener("pointerdown",xn),null===(t=document.getElementById("poki-playtest-popup-wrapper"))||void 0===t||t.remove(),null===(e=document.getElementById("poki-playtest-template-markup"))||void 0===e||e.remove(),null===(n=document.getElementById("poki-playtest-template-style"))||void 0===n||n.remove()}function Tn(t){t.stopImmediatePropagation()}function En(t){var e=t.gameTitle,n=t.rejectCallback,o=t.resolveCallback,r=document.body;!function(t){var e=document.createElement("template");e.innerHTML=An,t.appendChild(e.content);var n=document.createElement("style");n.innerHTML=Sn,n.id="poki-playtest-template-style",t.appendChild(n)}(r);var i=document.getElementById("poki-playtest-template-markup").content.cloneNode(!0);i.querySelector("#poki-playtest-popup-game-title").textContent=e,function(){return bn(this,void 0,void 0,(function(){var t,e,n,o,r,i,a;return kn(this,(function(s){switch(s.label){case 0:return t=new FontFace("ProximaNova","url(https://a.poki-cdn.com/fonts/proxima-nova-regular-latin.woff2)").load(),e=new FontFace("ProximaNova","url(https://a.poki-cdn.com/fonts/proxima-nova-bold-latin.woff2)",{weight:"bold"}).load(),n=new FontFace("Torus","url(https://a.poki-cdn.com/fonts/torus-bold-latin.woff2)").load(),[4,Promise.all([t,e,n])];case 1:return o=s.sent(),r=o[0],i=o[1],a=o[2],document.fonts.add(r),document.fonts.add(i),document.fonts.add(a),[2]}}))}))}().then((function(){r.appendChild(i),function(t){var e=t.rejectCallback,n=t.resolveCallback,o=document.getElementById("poki-playtest-popup-reject"),r=document.getElementById("poki-playtest-popup-resolve");null==o||o.addEventListener("pointerdown",(function(){xn(),e()})),null==r||r.addEventListener("pointerdown",(function(){xn(),n()}));var i=document.getElementById("poki-playtest-popup-wrapper");i&&["pointerdown","pointerup","pointermove","click","mousedown","mouseup","mousemove","touchstart","touchend","touchmove","contextmenu","dragstart"].forEach((function(t){return i.addEventListener(t,Tn)}))}({rejectCallback:n,resolveCallback:o})}))}function In(t){return Math.round(100*t)/100}var Cn=function(){function t(t){var e=this;this.seconds=[],this.frameCounter=0,Math.random()>t||window.requestAnimationFrame&&-1!==window.requestAnimationFrame.toString().indexOf("[native code]")&&(this.nextSecond=performance.now()+1e3,window.requestAnimationFrame((function(){e.frame()})))}return t.prototype.frame=function(){for(var t=this,e=performance.now();e>=this.nextSecond;)this.seconds.unshift(this.frameCounter),this.seconds.length>10&&this.seconds.pop(),this.frameCounter=0,this.nextSecond+=1e3;this.frameCounter++,window.requestAnimationFrame((function(){t.frame()}))},t.prototype.stats=function(){var t=this;if(0!==this.seconds.length){var e=Math.min.apply(Math,this.seconds),n=Math.max.apply(Math,this.seconds),o=In(this.seconds.reduce((function(t,e){return t+e}),0)/this.seconds.length),r=In(this.seconds.slice(1).map((function(e,n){return Math.abs(e-t.seconds[n])})).reduce((function(t,e){return t+e}),0)/(this.seconds.length-1));return isNaN(r)&&(r=0),"".concat(e,"|").concat(n,"|").concat(o,"|").concat(r)}},t}();function Pn(t){for(var e=[],n=0,o=0;o<t.length;o++)if(n>0)n--;else{var r=t[o];if("string"==typeof r)n=(r.match(/%c/g)||[]).length,e.push(r.replace(/%c/g,""));else try{e.push(String(r))}catch(t){e.push("<".concat(t.message,">"))}}return e.join(" ")}var _n,Ln=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Mn=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Dn=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Rn=function(t,e){},On=[],Bn=null,Nn=0,Gn=Dn(Dn([],Object.values(t.tracking.screen),!0),[t.tracking.ads.status.completed,t.tracking.ads.status.error,t.tracking.ads.status.limit,t.tracking.ads.video.progress],!1),Fn=((_n={})[t.tracking.screen.commercialBreak]="commercialBreak",_n[t.tracking.screen.gameLoadingFinished]="gameLoadingFinished",_n[t.tracking.screen.gameplayStart]="gameplayStart",_n[t.tracking.screen.gameplayStop]="gameplayStop",_n[t.tracking.screen.rewardedBreak]="rewardedBreak",_n);function Vn(e,n){console.info("%cPOKI_PLAYTEST:%c start recording using codec","font-weight: bold","",n);var o=wn(e);o&&((Bn=new WebSocket("wss://playtest-recorder.poki.io/ws")).addEventListener("error",(function(e){Kn.track(t.tracking.playtest.error,{message:e.message}),console.info("%cPOKI_PLAYTEST:%c error","font-weight: bold","",e)})),Bn.addEventListener("open",(function(){if(Bn){if(Bn.readyState===Bn.OPEN){var r=void 0;try{var i=document.createElement("canvas"),a={powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1},s=i.getContext("webgl2",a);if(s||(s=i.getContext("webgl",a))||(s=i.getContext("experimental-webgl",a)),s){var c=s,u=c.getExtension("WEBGL_debug_renderer_info");u&&(r=c.getParameter(u.UNMASKED_RENDERER_WEBGL)),r||(r=c.getParameter(c.RENDERER))}}catch(t){}var l=JSON.stringify({type:"save",game_id:S.gameID,version_id:S.versionID,webgl_renderer:r,sdk_version:"f4b8300efe19419acea45c26d401fe1f783c7d39",cpus:navigator.hardwareConcurrency,device_pixel_ratio:window.devicePixelRatio||1,canvasses:e.length});Bn.send(l),console.info("%cPOKI_PLAYTEST:%c websocket open","font-weight: bold","",l)}var d=new MediaRecorder(o,{mimeType:n,videoBitsPerSecond:5e5}),p=performance.now(),f=function(t){return Math.round((t||performance.now())-p)};d.addEventListener("stop",(function(){console.info("%cPOKI_PLAYTEST:%c recording stopped","font-weight: bold","")})),d.addEventListener("error",(function(t){console.error("%cPOKI_PLAYTEST:%c","font-weight: bold","",t.error)})),d.addEventListener("dataavailable",(function(t){t.data.size>0&&(Bn&&Bn.readyState===Bn.OPEN&&Bn.send(t.data))})),d.start(250);var h={},v=!1;document.addEventListener("keydown",(function(t){h[t.code]||(h[t.code]=!0,v=!0)})),document.addEventListener("keyup",(function(t){h[t.code]&&(h[t.code]=!1,v=!0)}));var g=setInterval((function(){var t=Object.keys(h);v&&t.length>0&&Bn&&Bn.readyState===Bn.OPEN&&Bn.send(JSON.stringify({type:"keyboard",offset:f(),keys:h})),v=!1,t.forEach((function(t){h[t]||delete h[t]}))}),50);Rn=function(t,e){if(Bn&&Bn.readyState===Bn.OPEN){Bn.send(Zt({type:"sdk-event",offset:f(e),event:t}));var n=Fn[t];n&&Bn.send(Zt({type:"console",offset:f(e),level:"log",message:"PokiSDK.".concat(n,"()")}))}},null!==On&&(On.forEach((function(t){Rn(t.event,t.timeMs)})),On=null),$t=function(t){Bn&&Bn.readyState===Bn.OPEN&&Bn.send(JSON.stringify({type:"error",offset:f(),error:t}))};try{var m=function(t){var e=console[t];console[t]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e.apply(console,n),Bn&&Bn.readyState===Bn.OPEN&&Bn.send(JSON.stringify({type:"console",offset:f(),level:t,message:Pn(n)}))}};m("log"),m("info"),m("warn"),m("error")}catch(t){}po.__playtestCaptureHTML===co&&Bn.send(JSON.stringify({type:"console",offset:f(),level:"log",message:"No canvas found, using HTML capture"}));var y=function(e){var n=e.position;if(Bn&&Bn.readyState===Bn.OPEN){var o=t.tracking.screen.commercialBreak,r="Commercial Break";n===t.ads.position.rewarded&&(o=t.tracking.screen.rewardedBreak,r="Rewarded Break"),mn(r),Bn.send(JSON.stringify({type:"sdk-event",offset:f(),event:o}))}};L.addEventListener(t.playtest.startVideo,y);var w=function(){mn("")};L.addEventListener(t.playtest.stopVideo,w);var b=new Cn(1),k=setInterval((function(){Bn&&Bn.readyState===Bn.OPEN&&Bn.send(JSON.stringify({type:"fps",offset:f(),stats:b.stats()}))}),1e3);Bn.addEventListener("close",(function(e){console.info("%cPOKI_PLAYTEST:%c websocket closed","font-weight: bold","",e),Rn=function(){},L.removeEventListener(t.playtest.startVideo,y),L.removeEventListener(t.playtest.stopVideo,w),clearInterval(g),clearInterval(k),d.stop(),je=!0,Bn=null,Kn.track(t.tracking.playtest.closed,{reason:"".concat(e.reason,":").concat(e.code,":").concat(e.wasClean)})}))}})))}function zn(e,n){var o;n?(Kn.track(t.tracking.playtest.showModal,{show:!0}),console.info("%cPOKI_PLAYTEST:%c init","font-weight: bold","",n),(o=(null==e?void 0:e.gameTitle)||"this game",new Promise((function(t,e){return Ln(void 0,void 0,void 0,(function(){return Mn(this,(function(n){return console.info("%cPOKI_PLAYTEST:%c showing consent screen","font-weight: bold",""),En({rejectCallback:e,resolveCallback:t,gameTitle:o}),[2]}))}))}))).then((function(){Kn.track(t.tracking.playtest.accepted);var e=performance.now()+12e4,o=setInterval((function(){var r=performance.now();!function(){var t=window;if(t.pc&&(t.pc.app||t.pc.AppBase))return!0;if(t.c3_runtimeInterface)return!0;if(t._dmJSDeviceShared)return!0;if(t.g_WebAudioContext)return!0;if(t.unityGame)return!0;return!1}()&&Nn&&r-Nn>1e4&&(Kn.track(t.tracking.playtest.noCanvas),console.info("%cPOKI_PLAYTEST:%c no canvas found, switch to HTML capture","font-weight: bold",""),po.__playtestCaptureHTML=co);var i=yn();if(i.length){clearInterval(o),Kn.track(t.tracking.playtest.starting);try{Vn(i,n)}catch(t){}}r>e&&(Kn.track(t.tracking.playtest.notLoaded),clearInterval(o),console.info("%cPOKI_PLAYTEST:%c no gameLoadingFinished within 2 minutes","font-weight: bold",""),On=null)}),1e3)})).catch((function(e){Kn.track(t.tracking.playtest.rejected),console.info("%cPOKI_PLAYTEST:%c rejected","font-weight: bold","",e),On=null}))):On=null}var jn=function(){return jn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},jn.apply(this,arguments)},Hn=C(t.tracking),qn=window,Un=function(){function a(){}return a.track=function(e,n){var o,r;void 0===n&&(n={});var i=jn({},n);if(-1===Hn.indexOf(e))throw new TypeError("Invalid 'event', must be one of ".concat(Hn.join(", ")));if("object"!=typeof i)throw new TypeError("Invalid data, must be an object");var s=L.getVideoDataAnnotations();if(null==s?void 0:s.pokiAdServer)switch(e){case t.tracking.ads.status.started:var c=s.creativeId;L.addVideoDataAnnotations({houseAdId:c}),i.houseAdId=c;break;case t.tracking.ads.status.impression:c=null==i?void 0:i.creativeId;D(jn(jn({},i),{event:"video-impression",creativeId:c})),L.addVideoDataAnnotations({houseAdId:c}),i.houseAdId=c;break;case t.tracking.ads.video.error:D(jn(jn({},i),{event:"video-error",errorCode:null==i?void 0:i.errorCode}));break;case t.tracking.ads.video.loaderError:D(jn(jn({},i),{event:"video-adsloader-error",errorCode:null==i?void 0:i.errorCode}));break;case t.tracking.ads.status.completed:D(jn(jn({},i),{event:"video-complete"}))}if(e.includes("pokiTrackingRewardedWeb")&&(i=s),E.log){if("test"===(null===(r=null===(o=null===window||void 0===window?void 0:window.process)||void 0===o?void 0:o.env)||void 0===r?void 0:r.NODE_ENV))return;Object.keys(i).length?console.info("%cPOKI_TRACKER:%c Tracked event '".concat(e,"' with data:"),"font-weight: bold","",i):console.info("%cPOKI_TRACKER:%c Tracked event '".concat(e,"'"),"font-weight: bold","")}!function(e){if(e.event===t.tracking.screen.gameLoadingFinished&&(Nn=performance.now()),Gn.includes(e.event))try{Rn(e.event),null!==On&&On.push({event:e.event,timeMs:performance.now()})}catch(t){console.error("%cPOKI_PLAYTEST:%c","font-weight: bold","",t)}}({event:e,data:i}),a.logToObserver?a.pushEvent("sdk","message",{content:{event:e,data:i,pokifordevs:{game_id:S.gameID,game_version_id:void 0}},type:t.message.event}):x.sendMessage(t.message.event,{event:e,data:i})},a.setupDefaultEvents=function(){var e,n=((e={})[t.ready]=t.tracking.sdk.status.initialized,e[t.adblocked]=t.tracking.sdk.status.failed,e[t.ads.busy]=t.tracking.ads.status.busy,e[t.ads.completed]=t.tracking.ads.status.completed,e[t.ads.error]=t.tracking.ads.status.error,e[t.ads.impression]=t.tracking.ads.status.impression,e[t.ads.limit]=t.tracking.ads.status.limit,e[t.ads.ready]=t.tracking.ads.status.ready,e[t.ads.requested]=t.tracking.ads.status.requested,e[t.ads.prebidRequested]=t.tracking.ads.status.prebidRequested,e[t.ads.skipped]=t.tracking.ads.status.skipped,e[t.ads.started]=t.tracking.ads.status.started,e[t.ads.video.clicked]=t.tracking.ads.video.clicked,e[t.ads.video.error]=t.tracking.ads.video.error,e[t.ads.video.loaderError]=t.tracking.ads.video.loaderError,e[t.ads.video.buffering]=t.tracking.ads.status.buffering,e[t.ads.video.progress]=t.tracking.ads.video.progress,e[t.ads.video.paused]=t.tracking.ads.video.paused,e[t.ads.video.resumed]=t.tracking.ads.video.resumed,e);Object.keys(n).forEach((function(t){L.addEventListener(t,(function(e){a.track(n[t],e)}))}))},a.pushEvent=function(t,e,n){qn.pokiGTM.push({event:"".concat(t,"-").concat(e),eventNoun:t,eventVerb:e,eventData:n||{}})},a.setRequireConsent=function(t){a.cmpRequired=t,a.setupObserverIfCMP()},a.setupObserverWithCMP=function(t){a.cmpIndex=t,a.setupObserverIfCMP()},a.setupObserverIfCMP=function(){if(void 0!==a.cmpRequired&&void 0!==a.cmpIndex)if(a.cmpRequired){if(!window.__tcfapi)return void console.error("POKI-SDK: enableEventTracking: a CMP is required but no CMP is present.");window.__tcfapi("addEventListener",2,(function(t,e){!e||"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus||(window.__tcfapi("getNonIABVendorConsents",2,(function(t){t&&t.nonIabVendorConsents&&t.nonIabVendorConsents[a.cmpIndex||0]&&a.setupObserver()})),window.__tcfapi("removeEventListener",2,(function(){}),t.listenerId))}))}else a.setupObserver()},a.setupObserver=function(){qn._pokiSessionGlobalName="pokiSession",qn._pokiUserGlobalName="pokiUser",qn._pokiContextGlobalName="pokiContext",qn._pokiTrackerGlobalName="pokiTracker",function(t,a,f){var h=null;try{(h=u())?(h.previous_page.path=h.page.path,h.previous_page.type=h.page.type,h.previous_page.id=h.page.id,h.previous_page.start=h.page.start,h.previous_page.pageview_id=h.page.pageview_id,h.page.path=t,h.page.type=a,h.page.id=f,h.page.start=Date.now(),h.page.pageview_id=o(),h.depth=p()+1,h.expire=Date.now()+18e5):h=function(t,a,u){try{var f=e(i);if(f){var h=JSON.parse(f);if(c(h,!0))return h.previous_page.path=h.page.path,h.previous_page.type=h.page.type,h.previous_page.id=h.page.id,h.previous_page.start=h.page.start,h.previous_page.pageview_id=h.page.pageview_id,h.page.path=t,h.page.type=a,h.page.id=u,h.page.start=Date.now(),h.page.pageview_id=o(),h.depth=p()+1,h.expire=Date.now()+18e5,h.tab_id=d(),n(i,JSON.stringify(h)),h}}catch(t){var v=null;try{v=e(i)||null}catch(t){}r(t,"getSessionDepth",v)}var g=o();return{id:o(),expire:Date.now()+18e5,tab_id:d(),depth:1,count:l()+1,page:{path:t,type:a,id:u,start:Date.now(),pageview_id:g},previous_page:{},landing_page:{path:t,type:a,id:u,start:Date.now(),pageview_id:g},referrer_domain:s()}}(t,a,f),h.count>1&&(n("poki_uid_new","0"),window[window._pokiUserGlobalName]&&(window[window._pokiUserGlobalName].is_new=!1));var v=JSON.stringify(h);try{sessionStorage.setItem(i,v)}catch(t){r(t,"updateSession-1")}window[window._pokiSessionGlobalName]=h;try{n(i,v)}catch(t){r(t,"updateSession-4")}}catch(t){r(t,"updateSession-2")}}(window.location.pathname,"external",S.contentGameID),function(){var t,r,i=null===(t=window[window._pokiUserGlobalName])||void 0===t?void 0:t.id,a=(null===(r=window[window._pokiUserGlobalName])||void 0===r?void 0:r.is_new)||!1;i||(i=e("poki_uid"),a="1"===e("poki_uid_new")),i&&function(t){if(!/^[A-Za-z0-9-_]+$/.test(t))return!1;try{return 16===atob(t.replace(/-/g,"+").replace(/_/g,"/")).length}catch(t){return!1}}(i)||(i=o(),a=!0),n("poki_uid",i),n("poki_uid_new",a?"1":"0"),window[window._pokiUserGlobalName]={id:i,is_new:a}}(),qn[qn._pokiContextGlobalName]={tag:null,site:{id:null,domain:window.location.hostname,prefix:""},page:{id:S.contentGameID,type:"external",path:window.location.pathname,pageview_id:o()},user:qn[qn._pokiUserGlobalName],session:qn[qn._pokiSessionGlobalName]},qn.pokiGTM=qn.pokiGTM||[],R("https://a.poki-cdn.com/t2.js"),a.logToObserver=!0},a.logToObserver=!1,a.cmpRequired=void 0,a.cmpIndex=void 0,a}();const Kn=Un;const Wn=function(){for(var t=Math.floor(Date.now()/1e3),e="",n=0;n<4;n++)e=String.fromCharCode(255&t)+e,t>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){var o=new Uint32Array(12);crypto.getRandomValues(o);for(n=0;n<12;n++)e+=String.fromCharCode(255&o[n])}else for(n=0;n<12;n++)e+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")};var Yn=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Qn=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Jn=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Xn=Math.random().toString(36).substr(2,9);function Zn(){return Yn(this,void 0,void 0,(function(){var t,e,n;return Qn(this,(function(o){switch(o.label){case 0:return[4,window.cookieStore.getAll()];case 1:return t=o.sent(),window.indexedDB.databases?[4,window.indexedDB.databases()]:[3,3];case 2:return n=o.sent(),[3,4];case 3:n=[],o.label=4;case 4:return e=n,[2,Jn(Jn(Jn([],t.map((function(t){return{name:t.name,expire_seconds:Math.round((t.expires-Date.now())/1e3),type:"cookie",domain:t.domain}})),!0),Object.keys(window.localStorage).map((function(t){return{name:t,expire_seconds:15552e3,type:"localStorage"}})),!0),e.map((function(t){return{name:t.name,expire_seconds:0,type:"idb"}})),!0)]}}))}))}var $n=function(){function t(){}return t.collectAndLog=function(){return Yn(this,void 0,void 0,(function(){var t,e;return Qn(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e={},[4,Zn()];case 1:return e.cookies=n.sent(),e.p4d_game_id=S.gameID,e.user_id=Xn,t=e,window.fetch("https://t.poki.io/game-cookies",{method:"post",body:JSON.stringify(t)}).catch(),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},t.trackSavegames=function(){window.cookieStore&&window.cookieStore.getAll&&S.gameID&&(Math.random()>.01||navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1||(t.collectAndLog(),setInterval(t.collectAndLog,12e4)))},t}();const to=$n;function eo(){var t;try{t=performance.getEntriesByType("resource").map((function(t){return t.transferSize})).reduce((function(t,e){return t+e})),t+=performance.getEntriesByType("navigation")[0].transferSize}catch(t){}return t}var no=new RegExp("(".concat(["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"].join("|"),")"),"ig");function oo(){window.navigator.userAgent.match(no)&&!S.isPlayground&&document.addEventListener("touchmove",(function(t){return t.preventDefault(),t.returnValue=!1,!1}),{passive:!1})}var ro=function(){return ro=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ro.apply(this,arguments)},io=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},ao=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},so="once",co="on",uo="off",lo=function(){function e(n){var o=this;this.gameStarted=!1,this.duringGameplay=!1,this.fpsStats=new Cn(.01),this.lastInteractionTime=0,this.lastGamePlayStop=0,this.badEventsCounter=0,this.asyncScreenshotLoader=function(){window.addEventListener("message",(function(e){return io(o,void 0,void 0,(function(){var n;return ao(this,(function(o){switch(o.label){case 0:return"pokiGenerateScreenshot"!==e.data.type?[3,1]:(r=e.data,ke(void 0,void 0,void 0,(function(){var e,n,o,i,a;return Ae(this,(function(s){switch(s.label){case 0:return e=r.hasFrame,n=null,e?(o=r.title,i=r.thumbnail,[4,xe({title:o,thumbnail:i})]):[3,2];case 1:return n=s.sent(),[3,4];case 2:return[4,xe()];case 3:n=s.sent(),s.label=4;case 4:return a={screenshot:n,errors:te},r.callback&&(a.callback=r.callback),x.sendMessage(t.message.sendGameScreenshot,{data:a}),[2]}}))})),[3,4]);case 1:return"pokiGenerateRawScreenshot"!==e.data.type?[3,2]:(ke(void 0,void 0,void 0,(function(){var e;return Ae(this,(function(n){switch(n.label){case 0:return[4,Ce()];case 1:return e=n.sent(),x.sendMessage(t.message.sendGameRawScreenshot,{data:{screenshot:e}}),[2]}}))})),[3,4]);case 2:return"pokiUploadScreenshot"!==e.data.type?[3,4]:[4,Te(e.data)];case 3:n=o.sent(),x.sendMessage(t.message.sendUploadScreenshot,{data:{screenshot:n}}),o.label=4;case 4:return[2]}var r}))}))}),!1)},this.setupInspector=function(){var e=0;if(window.addEventListener("message",(function(n){return io(o,void 0,void 0,(function(){return ao(this,(function(o){var r,i;return"pokiInspectorRequestCookies"===n.data.type?Zn().then((function(e){x.sendMessage(t.message.sendInspectorCookies,{data:{cookies:e}}),x.sendMessage(t.message.sendInspectorEvent,{event:"cookies",data:{cookies:e}})})):"pokiInspectorSetFPS"===n.data.type&&(e=n.data.fps||0)&&(r=performance.now(),i=function(){if(e){for(var t=r+1e3/e;!((r=performance.now())>=t););requestAnimationFrame(i)}},requestAnimationFrame(i)),[2]}))}))}),!1),"desktop"!==S.device)try{var n=function(e){var n=console[e];console[e]=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];x.sendMessage(t.message.sendInspectorConsole,{data:{level:e,args:Zt(o)}}),x.sendMessage(t.message.sendInspectorEvent,{event:"console",data:{level:e,args:Zt(o)}}),n.apply(console,o)}};n("log"),n("warn"),n("error")}catch(t){}},this.initWithVideoHB=function(){return o.init()},this.setDebug=function(e){void 0===e&&(e=!0);var n=window.location.hostname;n.endsWith("poki-gdn.com")||"qa-files.poki.com"===n?e&&Kn.track(t.tracking.debugTrueInProduction):(E.debug=e,E.log=null!=e?e:E.log,e?function(){if(re){re=!1,window.removeEventListener("unhandledrejection",se),window.removeEventListener("error",ce);try{console.error=ne}catch(t){}}}():ue())},this.setLogging=function(t){E.log=t},this.gameLoadingFinished=function(){var e,n,o,r;clearInterval(window.pokiCancelProgressInterval),Kn.track(t.tracking.screen.gameLoadingFinished,{transferSize:eo(),trackers:(o=window,r=[],"function"!=typeof o.ga&&"function"!=typeof o.gtag||r.push("ga"),o.mixpanel&&"function"==typeof o.mixpanel.track&&r.push("mixpanel"),"function"==typeof o.GameAnalytics&&r.push("gameanalytics"),(o.kongregateAPI||o.kongregate)&&r.push("kongregate"),o.FlurryAgent&&r.push("flurry"),o.Countly&&r.push("countly"),o.amplitude&&r.push("amplitude"),r).join(","),error_session_id:ie,now:Math.round(null===(n=null===(e=window.performance)||void 0===e?void 0:e.now)||void 0===n?void 0:n.call(e))||void 0})},this.gameplayStart=function(e){var n;o.ignoreEvents()?E.debug&&console.error("gameplayStart ignored because of too many events"):(o.duringGameplay=!0,o.gameStarted||(o.gameStarted=!0,Kn.track(t.tracking.screen.firstRound),o.monetization.startStartAdsAfterTimer()),performance.now()-o.lastInteractionTime<5e3&&(n=o.lastInteractionEvent),Kn.track(t.tracking.screen.gameplayStart,ro(ro({},e),{fps:o.fpsStats.stats(),badEvents:o.badEventsCounter,interaction:n})),clearTimeout(o.playerActiveTimeout),o.playerActiveTimeout=setTimeout((function(){window.addEventListener("pointermove",o.__playerIsActiveEvent),document.addEventListener("keydown",o.__playerIsActiveEvent)}),6e5),o.lastGamePlayStop&&(o.lastGamePlayStop>performance.now()-50&&o.badEventsCounter++,o.lastGamePlayStop=0))},this.gameplayStop=function(e){o.ignoreEvents()?E.debug&&console.error("gameplayStop ignored because of too many events"):(o.duringGameplay=!1,Kn.track(t.tracking.screen.gameplayStop,ro(ro({},e),{fps:o.fpsStats.stats()})),clearTimeout(o.playerActiveTimeout),window.removeEventListener("pointermove",o.__playerIsActiveEvent),document.removeEventListener("keydown",o.__playerIsActiveEvent),o.lastGamePlayStop=performance.now())},this.measure=function(e,n,o){void 0===n&&(n=""),void 0===o&&(o=""),Kn.track(t.tracking.measure,{category:"".concat(e),action:"".concat(n),label:"".concat(o),p4d_game_id:S.gameID,p4d_version_id:S.versionID})},this.customEvent=function(e,n,r){void 0===r&&(r={}),e&&n?(e=String(e),n=String(n),r=ro({},r),"game"===e&&"segment"===n&&r.segment&&o.measure(r.segment),Kn.track(t.tracking.custom,{eventNoun:e,eventVerb:n,eventData:r})):o.error("customEvent","customEvent needs at least a noun and a verb")},this.commercialBreak=function(e){return new Promise((function(n){if(o.ignoreEvents())return E.debug&&console.error("commercialBreak ignored because of too many events"),void n();var r=o.gameStarted?t.ads.position.midroll:t.ads.position.preroll;o.monetization.requestAd({position:r,onFinish:n,onStart:e})}))},this.rewardedBreak=function(e,n,r,i){return new Promise((function(a){var s,c={};"function"==typeof e?(s=e,void 0!==n&&(c.category=n),void 0!==r&&(c.details=r),void 0!==i&&(c.placement=i)):(void 0!==e&&(c.category=e),void 0!==n&&(c.details=n),void 0!==r&&(c.placement=r)),setTimeout((function(){c.category&&performance.now()-o.lastInteractionTime<500&&(c.from=o.lastInteractionEvent);var e=t.ads.position.rewarded;o.monetization.requestAd({position:e,onFinish:function(t){a(!!(null==t?void 0:t.rewardAllowed))},onStart:s,rewardedKVs:c})}),0)}))},this.displayAd=function(e,n,r,i){var a=Wn();Kn.track(t.tracking.screen.displayAd,{size:n,opportunityId:a,duringGameplay:o.duringGameplay});var s={container:e,opportunityId:a,size:n,duringGameplay:o.duringGameplay,onCanDestroy:r,onDisplayRendered:i};o.monetization.displayAd(s)},this.isAdBlocked=function(){return!1},this.muteAd=function(){o.monetization.muteAd()},this.logError=function(t){o.captureError(t)},this.setPlaytestCanvas=function(t){return o.playtestSetCanvas(t)},this.playtestSetCanvas=function(t){var n;t?(e.__playtestCanvas=[].concat(t),n=e.__playtestCanvas,He=n,vn(!0)):e.__playtestCanvas=[]},this.playtestCaptureHtmlOnce=function(){e.__playtestCaptureHTML=so},this.playtestCaptureHtmlOn=function(){e.__playtestCaptureHTML=co},this.playtestCaptureHtmlOff=function(){e.__playtestCaptureHTML=uo},this.getIsoLanguage=function(){return v("iso_lang")},this.shareableURL=function(e){return void 0===e&&(e={}),new Promise((function(n,o){var r=new URLSearchParams,i=Object.keys(e);if(S.isPokiIframe||S.isInspector){var a=v("poki_url");i.forEach((function(t){void 0!==e[t]&&null!==e[t]&&r.set("gd".concat(t),e[t])})),n("".concat(a,"?").concat(r.toString())),x.sendMessage(t.message.setPokiURLParams,{params:e})}else window.self===window.top?(i.forEach((function(t){void 0!==e[t]&&null!==e[t]&&r.set("".concat(t),e[t])})),n("".concat(window.location.origin).concat(window.location.pathname,"?").concat(r.toString()))):o(new Error("shareableURL only works on Poki or a top level frame"))}))},this.getURLParam=function(t){return v("gd".concat(t))||v(t)},this.captureError=function(t){ae(t)},this.getLanguage=function(){return navigator.language.toLowerCase().split("-")[0]},this.generateScreenshot=function(){return io(o,void 0,void 0,(function(){return ao(this,(function(t){return[2,xe()]}))}))},this.enableEventTracking=function(t){window.top===window&&Kn.setupObserverWithCMP(t||0)},this.error=function(t,e){console.error("PokiSDK.".concat(t,": ").concat(e))},this.__playerIsActiveEvent=function(){window.removeEventListener("pointermove",o.__playerIsActiveEvent),document.removeEventListener("keydown",o.__playerIsActiveEvent),Kn.track(t.tracking.screen.playerActive),o.playerActiveTimeout=setTimeout((function(){window.addEventListener("pointermove",o.__playerIsActiveEvent),document.addEventListener("keydown",o.__playerIsActiveEvent)}),6e5)},this.__interactionEvent=function(t){"mousedown"===t.type?o.lastInteractionEvent="mousedown":"pointerdown"===t.type?o.lastInteractionEvent="pointerdown":"keydown"===t.type&&(o.lastInteractionEvent="keydown-".concat(t.code)),o.lastInteractionTime=performance.now()},this.setDebugTouchOverlayController=function(){},this.gameInteractive=function(){},this.gameLoadingProgress=function(){},this.gameLoadingStart=function(){},this.getLeaderboard=function(){return Promise.resolve([])},this.happyTime=function(){},this.sendHighscore=function(){},this.setPlayerAge=function(){},this.roundStart=function(){},this.roundEnd=function(){},this.monetization=n,this.SDK=this.monetization,oo(),setInterval((function(){o.badEventsCounter=Math.max(o.badEventsCounter-1,0)}),1e3)}return e.prototype.init=function(e){var n=this;return void 0===e&&(e={}),window.addEventListener("pointerdown",this.__interactionEvent),document.addEventListener("keydown",this.__interactionEvent),new Promise((function(o){n.monetization.init(ro({onReady:function(){v("preroll")&&n.monetization.forcePreroll(),o()}},e)),n.asyncScreenshotLoader(),S.isInspector&&n.setupInspector(),document.location.search.length<=1&&(x.sendMessage(t.message.sendInspectorBadBehavior,{data:{behavior:"rewrite_query_params"}}),x.sendMessage(t.message.sendInspectorEvent,{event:"bad-behavior",data:{behavior:"rewrite_query_params"}})),x.sendMessage(t.message.sdkDetails,{version:"f4b8300efe19419acea45c26d401fe1f783c7d39"})}))},e.prototype.ignoreEvents=function(){return this.badEventsCounter>=10},e.prototype.destroyAd=function(t){this.monetization.destroyAd(t)},e.prototype.setVolume=function(t){this.monetization.setVolume(t)},e.__playtestCaptureHTML="",e}();const po=lo;var fo=21682198607;const ho={adTagUrl:"//pubads.g.doubleclick.net/gampad/ads?sz=640x360|640x480&iu=/1053551/Pub-Poki-Generic&ciu_szs&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url={url}&description_url={descriptionUrl}&correlator={timestamp}&nofb=1",adTiming:{preroll:!1,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:12e4},waterfallRetries:2};function vo(t){var e="/".concat(fo,"/debug-display/debug-display-").concat(t);return E.debug||(e=S.isPokiIframe?"/".concat(fo,"/").concat(S.device,"_ingame_").concat(t,"/").concat(S.siteID,"_").concat(S.device,"_ingame_").concat(t):"/".concat(fo,"/external_").concat(S.device,"_display_ingame/external_").concat(S.device,"_ingame_").concat(t)),e}var go=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},mo=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const yo=function(){var t=window.location.pathname;"/"!==t[0]&&(t="/".concat(t));var e="";window.top!==window&&(e=encodeURIComponent(document.referrer));var n=encodeURIComponent("".concat(window.location.protocol,"//").concat(window.location.host).concat(t).concat(window.location.search)),o="https://devs-api.poki.com/gameinfo/@sdk?href=".concat(n,"&referrer=").concat(e);return fetch(o,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((function(t){return go(void 0,void 0,void 0,(function(){var e;return mo(this,(function(n){switch(n.label){case 0:return t.status>=200&&t.status<400?[4,t.json()]:[3,2];case 1:return(e=n.sent()).game_id?[2,{gameID:e.game_id,gameTitle:e.game_name,playtestRecord:e.playtest_record,playtestVersion:e.playtest_version,playtestDeviceCategory:e.playtest_device_category,cachedContentGameID:e.cached_content_game_id,specialConditions:e.ad_settings.special_conditions,adTiming:{preroll:e.ad_settings.preroll,timePerTry:e.ad_settings.time_per_try,timeBetweenAds:e.ad_settings.time_between_ads,startAdsAfter:e.ad_settings.start_ads_after}}]:[2,void 0];case 2:throw t}}))}))})).catch((function(t){return function(t){return go(this,void 0,void 0,(function(){var e,n,o,r,i,a,s,c,u,l,d,p;return mo(this,(function(f){switch(f.label){case 0:console.error(t),f.label=1;case 1:return f.trys.push([1,4,,5]),"/"!==(e=window.location.pathname)[0]&&(e="/".concat(e)),r=(o=JSON).stringify,l={c:"sdk-p4d-error",ve:7},d={k:"error"},a=(i=JSON).stringify,p={status:t.status},(s=t.json)?[4,t.json()]:[3,3];case 2:s=f.sent(),f.label=3;case 3:if(n=r.apply(o,[(l.d=[(d.v=a.apply(i,[(p.json=s,p.body=JSON.stringify({href:"".concat(window.location.protocol,"//").concat(window.location.host).concat(e).concat(window.location.search)}),p.name=t.name,p.message=t.message,p)]),d)],l)]),c="https://t.poki.io/l",navigator.sendBeacon)navigator.sendBeacon(c,n);else try{(u=new XMLHttpRequest).open("POST",c,!0),u.send(n)}catch(t){}return[3,5];case 4:return f.sent(),[3,5];case 5:return[2]}}))}))}(t)}))};const wo=function(t){return t instanceof Array?t:[t]};var bo=function(){function e(e){void 0===e&&(e={}),this.setTimings(e),this.timingIdx={timePerTry:0},this.timers={timePerTry:void 0,timeBetweenAds:void 0,startAdsAfter:void 0},(null==e?void 0:e.fake)||(L.addEventListener(t.ads.requested,this.startTimeBetweenAdsTimer.bind(this)),L.addEventListener(t.ads.completed,this.startTimeBetweenAdsTimer.bind(this)),L.addEventListener(t.ads.stopped,this.startTimeBetweenAdsTimer.bind(this)))}return e.prototype.setTimings=function(t){var e=ho.adTiming,n=t.preroll,o=void 0===n?e.preroll:n,r=t.timePerTry,i=void 0===r?e.timePerTry:r,a=t.timeBetweenAds,s=void 0===a?e.timeBetweenAds:a,c=t.startAdsAfter,u=void 0===c?e.startAdsAfter:c;this.timings={preroll:!1!==o,timePerTry:wo(i),timeBetweenAds:s,startAdsAfter:u}},e.prototype.resetAll=function(){this.timingIdx={timePerTry:0},this.stopTimer("timePerTry"),this.stopTimer("timeBetweenAds"),this.stopTimer("startAdsAfter")},e.prototype.startTimeBetweenAdsTimer=function(){this.startTimer("timeBetweenAds")},e.prototype.startStartAdsAfterTimer=function(){this.startTimer("startAdsAfter")},e.prototype.requestPossible=function(){return!this.timers.timeBetweenAds&&!this.timers.startAdsAfter},e.prototype.startWaterfallTimer=function(t){this.startTimer("timePerTry",t)},e.prototype.stopWaterfallTimer=function(){this.stopTimer("timePerTry")},e.prototype.nextWaterfallTimer=function(){this.nextTiming("timePerTry")},e.prototype.resetWaterfallTimerIdx=function(){this.resetTimingIdx("timePerTry")},e.prototype.stopTimer=function(t){this.timers[t]&&(clearTimeout(this.timers[t]),this.timers[t]=void 0)},e.prototype.startTimer=function(t,e){var n=this;void 0===e&&(e=function(){}),this.getTiming(t)<=0?e():(this.timers[t]&&clearTimeout(this.timers[t]),this.timers[t]=window.setTimeout((function(){n.stopTimer(t),e()}),this.getTiming(t)))},e.prototype.getTiming=function(t){var e=this.timings[t];return e instanceof Array?e[this.timingIdx[t]]:e},e.prototype.nextTiming=function(t){if(void 0===this.timingIdx[t])throw new Error("AdTimings Error: ".concat(t," does not have multiple timers"));this.timingIdx[t]=(this.timingIdx[t]+1)%this.timings[t].length},e.prototype.resetTimingIdx=function(t){if(void 0===this.timingIdx[t])throw new Error("AdTimings Error: ".concat(t," does not have multiple timers"));this.timingIdx[t]=0},e.prototype.prerollPossible=function(){return this.timings.preroll},e}();const ko=bo;var Ao=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},So=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function xo(){return Ao(this,void 0,void 0,(function(){var t;return So(this,(function(e){return t=navigator,S.isPokiIframe?["GB","NL","CA"].includes(S.country)||t.connection&&t.connection.effectiveType&&"4g"!==t.connection.effectiveType||(null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)<8?[2,!1]:document.createElement("canvas").getContext("webgl2",{failIfMajorPerformanceCaveat:!0})?[2,!0]:[2,!1]:[2,!1]}))}))}function To(t){if(document.body&&document.body.appendChild){var e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e),e.contentWindow&&(e.contentWindow.document.open(),e.contentWindow.document.write("<script>".concat(t,"<\/script>")),e.contentWindow.document.close())}else document.addEventListener("DOMContentLoaded",(function(){To(t)}))}function Eo(){To("\nwindow.addEventListener('storage', function(event) {\n\ttry {\n\t\tconst key = event.key;\n\n\t\t// key is null when localStorage.clear() is called.\n\t\tif (key === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'clear',\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t\treturn;\n\t\t}\n\n\t\t// newValue is null when localStorage.removeItem() is called.\n\t\tif (event.newValue === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'delete',\n\t\t\t\t\tkey,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t} else {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'set',\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: event.newValue,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t}\n\t} catch (e) {}\n});\n")}var Io=function(){S.isPokiIframe&&(setTimeout(to.trackSavegames,1e4),(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||S.cloudSaveGames)&&Eo())},Co=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Po=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},_o=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Lo="none",Mo="requesting",Do=function(){function e(){var e=this;this.callbacks={},this.adTiming=ho.adTiming,this.mutationChecker=new MutationObserver(this.mutationObserved.bind(this)),this.videoState=Lo,this.adTimings=new ko({fake:!0}),this.initializing=!1,this.init=function(t){if(!e.initializing){e.initializing=!0;var n=t.onReady,o=void 0===n?null:n;Io(),S.kioskMode&&document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.postSDKMessage("keydownEscape")}));var r=function(){var t,n=1;e.callbacks.playgroundInit=function(){clearTimeout(t),null==o||o()};var r=function(){e.postSDKMessage("adTiming",{adTiming:e.adTiming,specialConditions:e.specialConditions}),n++,t=setTimeout(r,100*n)};t=setTimeout(r,100*n)};if(S.forceAd)return e.adTiming={preroll:!0,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:0},void r();if(E.debug)r();else 0,yo().then((function(t){e.adTiming=(null==t?void 0:t.adTiming)||ho.adTiming,e.specialConditions=(null==t?void 0:t.specialConditions)||[],r(),t&&function(t){return Ao(this,void 0,void 0,(function(){var e,n;return So(this,(function(o){switch(o.label){case 0:return"1"===v("playtest")?[3,2]:t.playtestRecord?t.playtestVersion&&t.playtestVersion!==S.versionID?[2,void 0]:(e=g()||m()||Le,"desktop"===t.playtestDeviceCategory&&e?[2,void 0]:"mobile"!==t.playtestDeviceCategory||e?[4,xo()]:[2,void 0]):[2,void 0];case 1:if(!o.sent())return[2,void 0];o.label=2;case 2:return n='video/webm;codecs="vp9"',(_e()||Le||Me)&&(n='video/mp4;codecs="avc1.42000d"'),MediaRecorder.isTypeSupported(n)?[2,n]:[2,void 0]}}))}))}(t).then((function(e){zn(t,e)})).catch((function(t){console.error("%cPOKI_PLAYTEST:%c","font-weight: bold","",t)}))})).catch((function(){r()}))}},this.isAdBlocked=function(){return!1},this.postSDKMessage=function(n){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];return Co(e,_o([n],o,!0),void 0,(function(e,n){return void 0===n&&(n={}),Po(this,(function(o){return x.sendMessage(t.message.sendCommand,{event:e,data:n},window.top),[2]}))}))},this.handleMessageReceived=function(n){var o,r,i,a,s,c,u,l,d,p,f,h;switch(null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.type){case"hoist_displayAd_onDisplayRendered":var v=null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.data,g=v.opportunityId,m=v.isEmpty;null===(a=null===(i=e.callbacks[g])||void 0===i?void 0:i.onDisplayRendered)||void 0===a||a.call(i,m);break;case"hoist_displayAd_onCanDestroy":g=(null===(s=null==n?void 0:n.data)||void 0===s?void 0:s.data).opportunityId;null===(u=null===(c=e.callbacks[g])||void 0===c?void 0:c.onCanDestroy)||void 0===u||u.call(c);break;case"hoist_videoAd_onStart":g=(null===(l=null==n?void 0:n.data)||void 0===l?void 0:l.data).opportunityId;if(e.videoState!==Mo)return;if(!e.callbacks[g])return;var y=e.callbacks[g],w=y.onStart,b=y.position;w&&w(),L.dispatchEvent(t.playtest.startVideo,{position:b}),e.videoState="playing";break;case"hoist_videoAd_onFinish":var k=null===(d=null==n?void 0:n.data)||void 0===d?void 0:d.data,A=(g=k.opportunityId,k.rewardAllowed);if(!e.callbacks[g])return;var S=e.callbacks[g],x=S.onFinish;b=S.position;if(e.videoState===Mo)return x&&(b===t.ads.position.rewarded?x(!!A):x()),e.videoState=Lo,void delete e.callbacks[g];x&&x(A),L.dispatchEvent(t.playtest.stopVideo),e.videoState=Lo,delete e.callbacks[g];break;case"hoist_playgroundInit":null===(f=(p=e.callbacks).playgroundInit)||void 0===f||f.call(p),delete e.callbacks.playgroundInit;break;case"hoist_displayAd_destroy":var T=(null===(h=null==n?void 0:n.data)||void 0===h?void 0:h.data).containerID;e.cleanAdContainer(T)}},this.cleanAdContainer=function(t){var e=document.querySelector('*[data-poki-ad-container-id="'.concat(t,'"]'));if(e){for(;e.lastChild;)e.removeChild(e.lastChild);e.removeAttribute("data-poki-opportunity-id"),e.removeAttribute("data-poki-ad-container-id")}}}return e.prototype.forcePreroll=function(){this.postSDKMessage("forcePreroll")},e.prototype.startStartAdsAfterTimer=function(){this.postSDKMessage("startStartAdsAfterTimer")},e.prototype.muteAd=function(){this.postSDKMessage("muteAd")},e.prototype.setVolume=function(t){this.postSDKMessage("setVolume",{volume:t||1})},e.prototype.requestAd=function(e){var n=e.onStart,o=e.onFinish,r=e.position,i=e.customCriteria,a=Wn();this.videoState===Lo?(this.videoState=Mo,this.callbacks[a]={position:r,onStart:function(){n&&"function"==typeof n&&n()},onFinish:function(t){o&&"function"==typeof o&&o({rewardAllowed:t})}},this.postSDKMessage("requestVideoAd",{position:r,customCriteria:i,opportunityId:a})):o&&(r===t.ads.position.rewarded?o({rewardAllowed:!1}):o())},e.prototype.displayAd=function(t){if(S.kioskMode)return!1;var e=t.container,n=t.size,o=t.opportunityId,r=t.onCanDestroy,i=t.onDisplayRendered;if(!e)return console.error("displayAd: given container doesn't exist"),!1;var a=e.getAttribute("data-poki-ad-container-id")||Wn();this.cleanAdContainer(a),e.setAttribute("data-poki-ad-container-id",a),e.setAttribute("data-poki-opportunity-id",o);var s=n.split("x").map((function(t){return parseInt(t,10)})),c=s[0],u=s[1],l=document.createElement("div");l.style.width="".concat(c,"px"),l.style.height="".concat(u,"px"),l.style.overflow="hidden",l.style.position="relative",l.style.pointerEvents="none",e.appendChild(l);var d=e.getBoundingClientRect(),p={x:(null==d?void 0:d.x)||0,y:(null==d?void 0:d.y)||0,w:c||0,h:u||0};return this.callbacks[o]={onCanDestroy:function(){r&&"function"==typeof r&&r()},onDisplayRendered:function(t){i&&"function"==typeof i&&i(t)}},this.mutationChecker.observe(e.parentElement||document.body,{childList:!0}),this.mutationChecker.observe(e,{attributes:!0,attributeFilter:["style"]}),this.postSDKMessage("displayAd",{containerID:a,adUnitPath:vo(n),size:t.size,opportunityId:o,duringGameplay:t.duringGameplay,location:p}),!0},e.prototype.destroyAd=function(t){if(t){var e=t.getAttribute("data-poki-opportunity-id"),n=t.getAttribute("data-poki-ad-container-id");n&&(delete this.callbacks[e],this.cleanAdContainer(n),this.postSDKMessage("destroyAd",{containerID:n,opportunityId:e}))}else console.error("destroyAd: given container doesn't exist")},e.prototype.mutationObserved=function(t){var e=this;t.forEach((function(t){var n,o,r,i,a;"childList"===(null==t?void 0:t.type)&&(null===(o=null===(n=t.removedNodes)||void 0===n?void 0:n.forEach)||void 0===o||o.call(n,(function(t){var n;(null===(n=null==t?void 0:t.getAttribute)||void 0===n?void 0:n.call(t,"data-poki-ad-container-id"))&&e.destroyAd(t)}))),"attributes"===(null==t?void 0:t.type)&&(null===(i=null===(r=null==t?void 0:t.target)||void 0===r?void 0:r.getAttribute)||void 0===i?void 0:i.call(r,"data-poki-ad-container-id"))&&("none"===(null==(a=t.target)?void 0:a.style.display)||parseInt(a.style.opacity,10)<1||"hidden"===a.style.visibility)&&e.destroyAd(t.target)}))},e.prototype.stopVideoAd=function(){},e.prototype.resizeVideoAd=function(){},e.prototype.setAdTimings=function(t){},e.prototype.setSpecialConditions=function(t){},e}();const Ro=Do;var Oo,Bo=(Oo=function(t,e){return Oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Oo(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Oo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),No=function(t){function e(){var e=this,n=new Ro;return(e=t.call(this,n)||this).SDK=n,window.addEventListener("message",e.monetization.handleMessageReceived),e}return Bo(e,t),e}(po);var Go=new No;for(var Fo in Go)window.PokiSDK[Fo]=Go[Fo]})();